<!doctype html><html lang=en-us class=no-js><head><script type=text/javascript>var baseURL="localhost",sharedVersionsFileURL="https://api.github.com/repos/iguazio/doc-assets/contents/igz-platform-versions.json",backupVersionsFile="versions.json",offlineSiteDirName="iguazio_docs.v3.2.1",buildDrafts=!1,buildExpired=!1,buildFuture=!1</script><meta charset=utf-8><meta name=viewport content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1"><title>The NoSQL Spark DataFrame | Iguazio</title><meta name=generator content="Hugo 0.81.0"><meta name=description content="Iguazio MLOps Platform Spark NoSQL dataframe API reference"><link rel=canonical href=https://github.com/jasonnIguazio/ghpages-doc-site/data-layer/reference/spark-apis/spark-datasets/nosql-dataframe/><meta name=author content="Iguazio"><meta property="og:url" content="https://github.com/jasonnIguazio/ghpages-doc-site/data-layer/reference/spark-apis/spark-datasets/nosql-dataframe/"><meta property="og:title" content="Iguazio MLOps Platform Documentation"><meta name=apple-mobile-web-app-title content="Iguazio MLOps Platform Documentation"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><link rel=icon type=image/x-icon href=../../../../../images/favicon/igz_favicon.png><link rel=stylesheet href=../../../../../css/vendor/bootstrap.min.css><link rel=stylesheet href=../../../../../css/style.css><script src=../../../../../js/vendor.js></script><script src=../../../../../js/app.js></script></head><body><div class=single-page><nav aria-label=Header class=top-menu><div class=left><div class=hamburger-side-menu><span aria-hidden=true>&#9776;</span></div><div class=home-links><a href=https://www.iguazio.com><div class=logo></div></a><a href=../../../../../ data-url-parent=/ class="top-menu-main-item docs-home">Docs Home</a><div id=version-box class=version-box data-home-url><div id=product-versions-dropdown class=dropdown><button class="btn dropdown-toggle igz_version-btn" data-current-version=3.2 type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
<span>V3.2</span>&nbsp;&nbsp;&nbsp;<span class=caret></span></button><div class="version-dropdown-menu dropdown-menu"></div></div><div id=igz_version-text class=igz_version-btn>Version 3.2</div></div></div><div class=additional-links><a href=https://tinyurl.com/y43w6bpj class=top-menu-main-item target=_blank>Videos</a>
<a href=https://www.iguazio.com/blog/ class=top-menu-main-item target=_blank>Blog</a></div></div><div class=right><div class=search-icon></div><div class=hamburger-right-menu><span aria-hidden=true>&#9776;</span></div><div class=search-block><div class=input-group><input class="search-field form-control" type=text name=search placeholder=Search data-toggle=tooltip title data-placement=bottom><div class=input-group-append><button type=button class="btn dropdown-toggle" data-toggle=dropdown aria-haspopup=true aria-expanded=false></button><div class="search-options dropdown-menu dropdown-menu-right"><a class="dropdown-item active" data-value=/>Search all sections</a>
<a class=dropdown-item data-value=intro>Search in Introduction</a>
<a class=dropdown-item data-value=ds-and-mlops>Search in Data Science and MLOps</a>
<a class=dropdown-item data-value=data-layer>Search in Data Layer</a>
<a class=dropdown-item data-value=services>Search in Platform Services</a>
<a class=dropdown-item data-value=cluster-mgmt>Search in Cluster Management and Deployment</a>
<a class=dropdown-item data-value=users-and-security>Search in Platform Users and Security</a>
<a class=dropdown-item data-value=release-notes>Search in Release Notes</a></div></div></div><div class=inline-search-results><ul></ul></div></div></div></nav><div class=right-nav-menu><i class=close-icon aria-hidden=true>&#215;</i><ul class=main-top-menu-items><li><a href=https://tinyurl.com/y43w6bpj class=top-menu-main-item target=_blank>Videos</a></li><li><a href=https://www.iguazio.com/blog/ class=top-menu-main-item target=_blank>Blog</a></li></ul></div></div><div class=documentation><div class=side-menu-show><i id=side-menu-show class="fas fa-angle-double-right" aria-hidden=true><span class=side-menu-show-tooltip>Show TOC</span></i></div><div id=side-menu><div class=side-menu-action-bar><i id=side-menu-expand class="far fa-plus-square" aria-hidden=true><span class=expand-tooltip>Expand All</span></i>
<i id=side-menu-collapse class="far fa-minus-square" aria-hidden=true><span class=collapse-tooltip>Collapse All</span></i>
<i id=side-menu-hide class="fas fa-angle-double-up" aria-hidden=true><span class=side-menu-hide-tooltip>Hide TOC</span></i></div><ul class=side-menu><li class="side-menu-list hide" data-url-parent=/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../ class=side-menu__item__link__text data-url-info=/>Documentation Home</a></p></li><li class="side-menu-list hide" data-url-parent=/intro/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../intro/ class=side-menu__item__link__text data-url-info=/intro/>Introduction</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/intro/introduction/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../intro/introduction/ class=side-menu__item__link__text data-url-info=/intro/introduction/>Introducing the Platform</a></p></li><li class="side-menu-list hide" data-url-parent=/intro/product-overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../intro/product-overview/ class=side-menu__item__link__text data-url-info=/intro/product-overview/>In-Depth Platform Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/intro/ui/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../intro/ui/ class=side-menu__item__link__text data-url-info=/intro/ui/>The Platform Dashboard (UI)</a></p></li><li class="side-menu-list hide" data-url-parent=/intro/apis-overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../intro/apis-overview/ class=side-menu__item__link__text data-url-info=/intro/apis-overview/>APIs Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/intro/high-availability/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../intro/high-availability/ class=side-menu__item__link__text data-url-info=/intro/high-availability/>High Availability (HA)</a></p></li><li class="side-menu-list hide" data-url-parent=/intro/trial-qs/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../intro/trial-qs/ class=side-menu__item__link__text data-url-info=/intro/trial-qs/>Iguazio Trial Quick-Start</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/ds-and-mlops/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../ds-and-mlops/ class=side-menu__item__link__text data-url-info=/ds-and-mlops/>Data Science and MLOps</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/ class=side-menu__item__link__text data-url-info=/data-layer/>Data Layer</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/containers/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/containers/ class=side-menu__item__link__text data-url-info=/data-layer/containers/>Data Containers</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/containers/predefined-containers/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/containers/predefined-containers/ class=side-menu__item__link__text data-url-info=/data-layer/containers/predefined-containers/>The Predefined Containers</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/containers/container-names/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/containers/container-names/ class=side-menu__item__link__text data-url-info=/data-layer/containers/container-names/>Container Names and IDs</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/containers/working-with-containers/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/containers/working-with-containers/ class=side-menu__item__link__text data-url-info=/data-layer/containers/working-with-containers/>Working with Data Containers</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/objects/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/objects/ class=side-menu__item__link__text data-url-info=/data-layer/objects/>Data Objects</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/objects/attributes/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/objects/attributes/ class=side-menu__item__link__text data-url-info=/data-layer/objects/attributes/>Objects Attributes</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/objects/object-names-and-keys/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/objects/object-names-and-keys/ class=side-menu__item__link__text data-url-info=/data-layer/objects/object-names-and-keys/>Object Names and Primary Keys</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/objects/object-names-and-keys/best-practices-primary-keys-n-workload-distribution/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/objects/object-names-and-keys/best-practices-primary-keys-n-workload-distribution/ class=side-menu__item__link__text data-url-info=/data-layer/objects/object-names-and-keys/best-practices-primary-keys-n-workload-distribution/>Best Practices for Defining Primary Keys and Distributing Data Workloads</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/objects/ingest-n-consume-files/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/objects/ingest-n-consume-files/ class=side-menu__item__link__text data-url-info=/data-layer/objects/ingest-n-consume-files/>Ingesting and Consuming Files</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/apis/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/apis/ class=side-menu__item__link__text data-url-info=/data-layer/apis/>The Data-Layer APIs</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/apis/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/apis/overview/ class=side-menu__item__link__text data-url-info=/data-layer/apis/overview/>APIs Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/apis/data-paths/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/apis/data-paths/ class=side-menu__item__link__text data-url-info=/data-layer/apis/data-paths/>API Data Paths</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/data-ingestion-and-preparation/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/data-ingestion-and-preparation/ class=side-menu__item__link__text data-url-info=/data-layer/data-ingestion-and-preparation/>Ingesting and Preparing Data</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/nosql/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/nosql/ class=side-menu__item__link__text data-url-info=/data-layer/nosql/>NoSQL (Key-Value) Databases</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/stream/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/stream/ class=side-menu__item__link__text data-url-info=/data-layer/stream/>Streams</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/tsdb/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/tsdb/ class=side-menu__item__link__text data-url-info=/data-layer/tsdb/>Time-Series Databases (TSDB)</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/tsdb/working-with-tsdbs/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/tsdb/working-with-tsdbs/ class=side-menu__item__link__text data-url-info=/data-layer/tsdb/working-with-tsdbs/>Working with Time-Series Databases (TSDBs)</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/tsdb/tsdb-cli/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/tsdb/tsdb-cli/ class=side-menu__item__link__text data-url-info=/data-layer/tsdb/tsdb-cli/>The TSDB CLI (tsdbctl)</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/spark-data-ingestion-qs/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/spark-data-ingestion-qs/ class=side-menu__item__link__text data-url-info=/data-layer/spark-data-ingestion-qs/>Spark Data-Ingestion Quick-Start</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/presto/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/presto/ class=side-menu__item__link__text data-url-info=/data-layer/presto/>Presto</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/presto/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/presto/overview/ class=side-menu__item__link__text data-url-info=/data-layer/presto/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/presto/presto-cli/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/presto/presto-cli/ class=side-menu__item__link__text data-url-info=/data-layer/presto/presto-cli/>The Presto CLI</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/ class=side-menu__item__link__text data-url-info=/data-layer/reference/>References</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/>Frames API (Python)</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/client-constructor/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/client-constructor/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/client-constructor/>Client Constructor</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/nosql/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/nosql/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/nosql/>NoSQL Backend</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/nosql/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/nosql/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/nosql/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/nosql/write/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/nosql/write/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/nosql/write/>write Method</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/nosql/read/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/nosql/read/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/nosql/read/>read Method</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/nosql/delete/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/nosql/delete/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/nosql/delete/>delete Method</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/nosql/execute/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/nosql/execute/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/nosql/execute/>execute Method</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/tsdb/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/tsdb/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/tsdb/>TSDB Backend</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/tsdb/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/tsdb/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/tsdb/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/tsdb/create/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/tsdb/create/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/tsdb/create/>create Method</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/tsdb/write/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/tsdb/write/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/tsdb/write/>write Method</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/tsdb/read/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/tsdb/read/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/tsdb/read/>read Method</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/tsdb/delete/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/tsdb/delete/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/tsdb/delete/>delete Method</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/frames/attribute-data-types/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/frames/attribute-data-types/ class=side-menu__item__link__text data-url-info=/data-layer/reference/frames/attribute-data-types/>Attribute Data Types</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/>Spark APIs</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-datasets/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-datasets/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-datasets/>Spark Datasets API (Pytyon and Scala)</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-datasets/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-datasets/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-datasets/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-datasets/nosql-dataframe/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-datasets/nosql-dataframe/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-datasets/nosql-dataframe/>The NoSQL DataFrame</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-datasets/spark-df-data-types/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-datasets/spark-df-data-types/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-datasets/spark-df-data-types/>Spark DataFrame Data Types</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/>Spark-Streaming Integration API (Scala)</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/payloadwithmetadata/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/payloadwithmetadata/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/payloadwithmetadata/>PayloadWithMetadata Class</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/recordandmetadata/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/recordandmetadata/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/recordandmetadata/>RecordAndMetadata Class</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/v3ioutils/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/v3ioutils/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/v3ioutils/>V3IOUtils Object</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/>Encoding and Decoding Types</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/decoder/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/decoder/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/decoder/>Decoder Trait</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/defaultdecoder/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/defaultdecoder/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/defaultdecoder/>DefaultDecoder Class</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/stringdecoder/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/stringdecoder/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/stringdecoder/>StringDecoder Class</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/encoding/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/encoding/ class=side-menu__item__link__text data-url-info=/data-layer/reference/spark-apis/spark-streaming-integration-api/encoding-decoding-types/encoding/>Encoding Trait</a></p></li></ul></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/>Web APIs (REST)</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/security/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/security/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/security/>Securing Your Web-API Requests</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/data-service-web-api-gen-struct/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/data-service-web-api-gen-struct/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/data-service-web-api-gen-struct/>Data-Service Web-API General Structure</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/simple-object-web-api/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/simple-object-web-api/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/simple-object-web-api/>Simple-Object Web API</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/simple-object-web-api/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/simple-object-web-api/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/simple-object-web-api/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/simple-object-web-api/container-operations/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/simple-object-web-api/container-operations/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/simple-object-web-api/container-operations/>Container Operations</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/simple-object-web-api/data-object-operations/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/simple-object-web-api/data-object-operations/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/simple-object-web-api/data-object-operations/>Data-Object Operations</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/>NoSQL Web API</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/getitem/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/getitem/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/getitem/>GetItem</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/getitems/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/getitems/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/getitems/>GetItems</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/putitem/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/putitem/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/putitem/>PutItem</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/updateitem/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/updateitem/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/updateitem/>UpdateItem</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/common-objects/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/common-objects/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/common-objects/>Common Objects</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/common-objects/attribute/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/common-objects/attribute/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/common-objects/attribute/>Attribute</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/nosql-web-api/common-objects/attribute-value/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/nosql-web-api/common-objects/attribute-value/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/nosql-web-api/common-objects/attribute-value/>Attribute Value</a></p></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/streaming-web-api/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/streaming-web-api/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/streaming-web-api/>Streaming Web API</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/streaming-web-api/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/streaming-web-api/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/streaming-web-api/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/streaming-web-api/createstream/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/streaming-web-api/createstream/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/streaming-web-api/createstream/>CreateStream</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/streaming-web-api/describestream/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/streaming-web-api/describestream/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/streaming-web-api/describestream/>DescribeStream</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/streaming-web-api/getrecords/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/streaming-web-api/getrecords/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/streaming-web-api/getrecords/>GetRecords</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/streaming-web-api/putrecords/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/streaming-web-api/putrecords/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/streaming-web-api/putrecords/>PutRecords</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/streaming-web-api/seek/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/streaming-web-api/seek/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/streaming-web-api/seek/>Seek</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/web-apis/streaming-web-api/updatestream/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/web-apis/streaming-web-api/updatestream/ class=side-menu__item__link__text data-url-info=/data-layer/reference/web-apis/streaming-web-api/updatestream/>UpdateStream</a></p></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/data-types/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/data-types/ class=side-menu__item__link__text data-url-info=/data-layer/reference/data-types/>Common Data Types</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/data-types/attribute-data-types/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/data-types/attribute-data-types/ class=side-menu__item__link__text data-url-info=/data-layer/reference/data-types/attribute-data-types/>Attribute Data Types</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/system-attributes/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/system-attributes/ class=side-menu__item__link__text data-url-info=/data-layer/reference/system-attributes/>System Attributes</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/>Expressions</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/overview/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/condition-expression/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/condition-expression/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/condition-expression/>Condition Expression</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/update-expression/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/update-expression/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/update-expression/>Update Expression</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/functions/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/functions/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/functions/>Functions</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/functions/array-functions/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/functions/array-functions/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/functions/array-functions/>Array Functions</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/functions/exists-n-not-exists-functions/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/functions/exists-n-not-exists-functions/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/functions/exists-n-not-exists-functions/>If Exists/Not-Exists Functions</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/functions/min-max-functions/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/functions/min-max-functions/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/functions/min-max-functions/>Maximal-/Minimal-Value Functions</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/functions/string-functions/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/functions/string-functions/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/functions/string-functions/>String Functions</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/operators/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/operators/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/operators/>Operators</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/operators/arithmetic-operators/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/operators/arithmetic-operators/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/operators/arithmetic-operators/>Arithmetic Operators</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/operators/array-operator/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/operators/array-operator/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/operators/array-operator/>Array Operator ([ ])</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/operators/assignment-operator/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/operators/assignment-operator/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/operators/assignment-operator/>Assignment Operator (=)</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/operators/bitwise-operators/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/operators/bitwise-operators/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/operators/bitwise-operators/>Bitwise Operators</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/operators/comparison-operators/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/operators/comparison-operators/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/operators/comparison-operators/>Comparison Operators</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/operators/in-operator/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/operators/in-operator/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/operators/in-operator/>IN Operator</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/expressions/operators/logical-operators/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/expressions/operators/logical-operators/ class=side-menu__item__link__text data-url-info=/data-layer/reference/expressions/operators/logical-operators/>Logical Operators</a></p></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/reserved-names/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/reserved-names/ class=side-menu__item__link__text data-url-info=/data-layer/reference/reserved-names/>Reserved Names</a></p></li><li class="side-menu-list hide" data-url-parent=/data-layer/reference/nosql-table-schema/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../data-layer/reference/nosql-table-schema/ class=side-menu__item__link__text data-url-info=/data-layer/reference/nosql-table-schema/>NoSQL Table Schema</a></p></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/services/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../services/ class=side-menu__item__link__text data-url-info=/services/>Platform Services</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/services/fundamentals/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/fundamentals/ class=side-menu__item__link__text data-url-info=/services/fundamentals/>Working with Services</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../services/app-services/ class=side-menu__item__link__text data-url-info=/services/app-services/>The Platform's Application Services</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/services/app-services/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/overview/ class=side-menu__item__link__text data-url-info=/services/app-services/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/jupyter/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/jupyter/ class=side-menu__item__link__text data-url-info=/services/app-services/jupyter/>Jupyter</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/python-ds-pkgs/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/python-ds-pkgs/ class=side-menu__item__link__text data-url-info=/services/app-services/python-ds-pkgs/>Python ML and Scientific Computation</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/gpu/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/gpu/ class=side-menu__item__link__text data-url-info=/services/app-services/gpu/>Running Applications over GPUs</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/mlops-services/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/mlops-services/ class=side-menu__item__link__text data-url-info=/services/app-services/mlops-services/>MLOps: MLRun and Kubeflow Pipelines</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/tsdb/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/tsdb/ class=side-menu__item__link__text data-url-info=/services/app-services/tsdb/>Time-Series Database (TSDB)</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/dask/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/dask/ class=side-menu__item__link__text data-url-info=/services/app-services/dask/>Dask</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/frames/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/frames/ class=side-menu__item__link__text data-url-info=/services/app-services/frames/>V3IO Frames</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/presto/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/presto/ class=side-menu__item__link__text data-url-info=/services/app-services/presto/>Presto and Hive</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/spark/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/spark/ class=side-menu__item__link__text data-url-info=/services/app-services/spark/>Spark</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/horovod-mpi-operator/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/horovod-mpi-operator/ class=side-menu__item__link__text data-url-info=/services/app-services/horovod-mpi-operator/>Horovod / MPI Operator</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/data-monitoring-and-visualization-services/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/data-monitoring-and-visualization-services/ class=side-menu__item__link__text data-url-info=/services/app-services/data-monitoring-and-visualization-services/>Data Monitoring and Visualization</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/logging-and-monitoring-services/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/logging-and-monitoring-services/ class=side-menu__item__link__text data-url-info=/services/app-services/logging-and-monitoring-services/>Logging and Monitoring</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/web-shell/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/web-shell/ class=side-menu__item__link__text data-url-info=/services/app-services/web-shell/>Web Shell</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/nuclio/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/nuclio/ class=side-menu__item__link__text data-url-info=/services/app-services/nuclio/>Nuclio Serverless Functions</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/hadoop/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/hadoop/ class=side-menu__item__link__text data-url-info=/services/app-services/hadoop/>Hadoop</a></p></li><li class="side-menu-list hide" data-url-parent=/services/app-services/tensorboard/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/app-services/tensorboard/ class=side-menu__item__link__text data-url-info=/services/app-services/tensorboard/>Tensorbaord</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/services/monitoring-services/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/monitoring-services/ class=side-menu__item__link__text data-url-info=/services/monitoring-services/>Monitoring Platform Services</a></p></li><li class="side-menu-list hide" data-url-parent=/services/grafana-dashboards/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../services/grafana-dashboards/ class=side-menu__item__link__text data-url-info=/services/grafana-dashboards/>Adding Grafana Dashboards</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/>Cluster Management and Deployment</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/logging-n-debugging/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/logging-n-debugging/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/logging-n-debugging/>Logging, Monitoring, and Debugging</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/>Deployment and Specifications</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/support-matrix/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/support-matrix/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/support-matrix/>Support and Certification Matrix</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/sw-specifications/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/sw-specifications/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/sw-specifications/>Software Specifications and Restrictions</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cfg-options/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cfg-options/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cfg-options/>Hardware-Configuration and Deployment Options</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/>Cloud Deployment</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/>Amazon Web Services (AWS)</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/aws-hw-spec/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/aws-hw-spec/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/aws-hw-spec/>Deployment Specifications</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/installationguides/aws-installation-guide/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/installationguides/aws-installation-guide/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/installationguides/aws-installation-guide/>Installation Guide</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/howto/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/howto/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/howto/>Deployment How-Tos</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/howto/resources-calculate/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/howto/resources-calculate/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/howto/resources-calculate/>Calculating Required Infrastructure Resources</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/howto/iam-user-create/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/howto/iam-user-create/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/howto/iam-user-create/>Creating an IAM User</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/howto/iam-role-n-instance-profile-create/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/howto/iam-role-n-instance-profile-create/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/howto/iam-role-n-instance-profile-create/>Creating an IAM Role and Instance Profile</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/howto/subnet-public-ips-alloc-cfg/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/howto/subnet-public-ips-alloc-cfg/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/howto/subnet-public-ips-alloc-cfg/>Configuring VPC Subnet Allocation of Public IP Addresses</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/howto/eks-app-cluster-deploy/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/howto/eks-app-cluster-deploy/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/howto/eks-app-cluster-deploy/>Deploying an Amazon EKS Application Cluster</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/howto/network-security-groups-cfg/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/howto/network-security-groups-cfg/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/howto/network-security-groups-cfg/>Network Security Groups Configuration</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/aws/howto/post-install-steps/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/aws/howto/post-install-steps/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/aws/howto/post-install-steps/>Post-Installation Steps</a></p></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/>Microsoft Azure</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/azure-hw-spec/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/azure-hw-spec/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/azure-hw-spec/>Deployment Specifications</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/installationguides/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/installationguides/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/installationguides/>Installation Guides</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/installationguides/azure-installation-guide/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/installationguides/azure-installation-guide/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/installationguides/azure-installation-guide/>Installation Guide</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/installationguides/azure-installation-guide-aks/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/installationguides/azure-installation-guide-aks/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/installationguides/azure-installation-guide-aks/>Installation Guide AKS</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/howto/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/howto/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/howto/>Deployment How-Tos</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/howto/pre-install-steps/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/howto/pre-install-steps/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/howto/pre-install-steps/>Pre-Installation Steps Using the Azure CLI</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/howto/resources-calculate/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/howto/resources-calculate/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/howto/resources-calculate/>Calculating Required Infrastructure Resources</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/howto/network-security-groups-cfg/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/howto/network-security-groups-cfg/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/howto/network-security-groups-cfg/>Network Security Groups Configuration</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/howto/post-install-steps/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/howto/post-install-steps/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/howto/post-install-steps/>Post-Installation Steps</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/azure/howto/troubleshoot-install/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/azure/howto/troubleshoot-install/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/azure/howto/troubleshoot-install/>Troubleshooting Installations</a></p></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/gcp/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/gcp/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/gcp/>Google Cloud Platform (GCP)</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/gcp/gcp-hw-spec/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/gcp/gcp-hw-spec/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/gcp/gcp-hw-spec/>Deployment Specifications</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/gcp/gcp-installation-guide/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/gcp/gcp-installation-guide/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/gcp/gcp-installation-guide/>Installation Guide</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/gcp/howto/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/gcp/howto/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/gcp/howto/>Deployment How-Tos</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/gcp/howto/resources-calculate/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/gcp/howto/resources-calculate/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/gcp/howto/resources-calculate/>Calculating Required Infrastructure Resources</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/gcp/howto/service-account-create/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/gcp/howto/service-account-create/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/gcp/howto/service-account-create/>Creating a GCP Service Account</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/cloud/gcp/howto/post-install-steps/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/cloud/gcp/howto/post-install-steps/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/cloud/gcp/howto/post-install-steps/>Post-Installation Steps</a></p></li></ul></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/>On-Premises Deployment</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/on-prem-hw-spec/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/on-prem-hw-spec/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/on-prem-hw-spec/>Deployment Specifications</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/>Virtual-Machine (VM) Deployment</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/>VMware vSphere</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/vmware-installation-guide/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/vmware-installation-guide/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/vmware-installation-guide/>Installation Guide</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/howto/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/>Deployment How-Tos</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/network-cfg/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/howto/network-cfg/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/network-cfg/>Configuring Virtual Networking</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/vms-deploy/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/howto/vms-deploy/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/vms-deploy/>Deploying the Platform Nodes</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/data-disks-attach/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/howto/data-disks-attach/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/data-disks-attach/>Attaching Data Disks to the Data Nodes</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/ips-cfg/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/howto/ips-cfg/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/ips-cfg/>Configuring IP Addresses</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/offline-install/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/howto/offline-install/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/offline-install/>Offline Installation</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/post-install-steps/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/vmware/howto/post-install-steps/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/vmware/howto/post-install-steps/>Post-Installation Steps</a></p></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/>Proxmox VE</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/proxmox-installation-guide/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/proxmox-installation-guide/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/proxmox-installation-guide/>Installation Guide</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/howto/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/>Deployment How-Tos</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/network-cfg/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/howto/network-cfg/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/network-cfg/>Configuring Virtual Networking</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/vms-deploy/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/howto/vms-deploy/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/vms-deploy/>Deploying the Platform Nodes</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/data-disks-attach/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/howto/data-disks-attach/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/data-disks-attach/>Attaching Data Disks to the Data Nodes</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/ips-cfg/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/howto/ips-cfg/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/ips-cfg/>Configuring IP Addresses</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/offline-install/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/howto/offline-install/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/offline-install/>Offline Installation</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/post-install-steps/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/on-prem/vm/proxmox/howto/post-install-steps/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/on-prem/vm/proxmox/howto/post-install-steps/>Post-Installation Steps</a></p></li></ul></li></ul></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/post-deployment-howtos/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/post-deployment-howtos/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/post-deployment-howtos/>Post-Deployment How-Tos</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/post-deployment-howtos/dns/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/post-deployment-howtos/dns/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/post-deployment-howtos/dns/>Configuring the DNS Server</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/post-deployment-howtos/smtp/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/post-deployment-howtos/smtp/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/post-deployment-howtos/smtp/>Configuring the SMTP Server</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/post-deployment-howtos/python_vars/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/post-deployment-howtos/python_vars/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/post-deployment-howtos/python_vars/>Configuring the Python Repositories</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/deployment/post-deployment-howtos/env_vars/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/deployment/post-deployment-howtos/env_vars/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/deployment/post-deployment-howtos/env_vars/>Configuring Environmental Variables</a></p></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/>References</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/>Management APIs (REST)</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/overview/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/general-api-structure/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/general-api-structure/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/general-api-structure/>General Management-API Structure</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/sessions-api/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/sessions-api/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/sessions-api/>Sessions API</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/sessions-api/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/sessions-api/overview/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/sessions-api/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/sessions-api/create-session/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/sessions-api/create-session/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/sessions-api/create-session/>Create Session</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/containers-api/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/containers-api/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/containers-api/>Containers API</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/containers-api/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/containers-api/overview/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/containers-api/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/containers-api/create-container/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/containers-api/create-container/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/containers-api/create-container/>Create Container</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/containers-api/delete-container/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/containers-api/delete-container/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/containers-api/delete-container/>Delete Container</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/containers-api/list-containers/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/containers-api/list-containers/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/containers-api/list-containers/>List Containers</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/cluster-info-api/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/cluster-info-api/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/cluster-info-api/>Cluster-Information API</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/cluster-info-api/overview/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/cluster-info-api/overview/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/cluster-info-api/overview/>Overview</a></p></li><li class="side-menu-list hide" data-url-parent=/cluster-mgmt/reference/management-apis/cluster-info-api/get-cluster-information/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../cluster-mgmt/reference/management-apis/cluster-info-api/get-cluster-information/ class=side-menu__item__link__text data-url-info=/cluster-mgmt/reference/management-apis/cluster-info-api/get-cluster-information/>Get Cluster Information</a></p></li></ul></li></ul></li></ul></li></ul></li><li class="side-menu-list hide" data-url-parent=/users-and-security/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../users-and-security/ class=side-menu__item__link__text data-url-info=/users-and-security/>Platform Users and Security</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/users-and-security/users/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../users-and-security/users/ class=side-menu__item__link__text data-url-info=/users-and-security/users/>Platform Users</a></p></li><li class="side-menu-list hide" data-url-parent=/users-and-security/security/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../users-and-security/security/ class=side-menu__item__link__text data-url-info=/users-and-security/security/>Security</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/ class=side-menu__item__link__text data-url-info=/release-notes/>Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/known_issues/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/known_issues/ class=side-menu__item__link__text data-url-info=/release-notes/known_issues/>Known Issues</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-3.2/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-3.2/ class=side-menu__item__link__text data-url-info=/release-notes/version-3.2/>Version 3.2 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-3.2/v3.2.1/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-3.2/v3.2.1/ class=side-menu__item__link__text data-url-info=/release-notes/version-3.2/v3.2.1/>V3.2.1 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-3.2/v3.2.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-3.2/v3.2.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-3.2/v3.2.0/>V3.2.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-3.0/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-3.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-3.0/>Version 3.0 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-3.0/v3.0.3/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-3.0/v3.0.3/ class=side-menu__item__link__text data-url-info=/release-notes/version-3.0/v3.0.3/>V3.0.3 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-3.0/v3.0.2/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-3.0/v3.0.2/ class=side-menu__item__link__text data-url-info=/release-notes/version-3.0/v3.0.2/>V3.0.2 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-3.0/v3.0.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-3.0/v3.0.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-3.0/v3.0.0/>V3.0.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.10/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.10/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.10/>Version 2.10 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.10/v2.10.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.10/v2.10.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.10/v2.10.0/>V2.10.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.8/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.8/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.8/>Version 2.8 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.8/v2.8.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.8/v2.8.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.8/v2.8.0/>V2.8.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.5/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.5/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.5/>Version 2.5 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.5/v2.5.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.5/v2.5.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.5/v2.5.0/>V2.5.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.3/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.3/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.3/>Version 2.3 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.3/v2.3.1/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.3/v2.3.1/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.3/v2.3.1/>V2.3.1 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.3/v2.3.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.3/v2.3.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.3/v2.3.0/>V2.3.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.2/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.2/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.2/>Version 2.2 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.2/v2.2.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.2/v2.2.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.2/v2.2.0/>V2.2.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.1/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.1/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.1/>Version 2.1 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.1/v2.1.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.1/v2.1.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.1/v2.1.0/>V2.1.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.0/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.0/>Version 2.0 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-2.0/v2.0.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-2.0/v2.0.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-2.0/v2.0.0/>V2.0.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.9/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.9/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.9/>Version 1.9 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.9/v1.9.5/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.9/v1.9.5/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.9/v1.9.5/>V1.9.5 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.9/v1.9.4/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.9/v1.9.4/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.9/v1.9.4/>V1.9.4 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.7/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.7/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.7/>Version 1.7 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.7/v1.7.2/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.7/v1.7.2/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.7/v1.7.2/>V1.7.2 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.7/v1.7.1/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.7/v1.7.1/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.7/v1.7.1/>V1.7.1 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.5/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.5/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.5/>Version 1.5 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.5/v1.5.4/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.5/v1.5.4/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.5/v1.5.4/>V1.5.4 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.5/v1.5.3/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.5/v1.5.3/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.5/v1.5.3/>V1.5.3 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.5/v1.5.2/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.5/v1.5.2/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.5/v1.5.2/>V1.5.2 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.5/v1.5.1/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.5/v1.5.1/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.5/v1.5.1/>V1.5.1 Release Notes</a></p></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.5/v1.5.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.5/v1.5.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.5/v1.5.0/>V1.5.0 Release Notes</a></p></li></ul></li><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.0/><p class=side-menu__item__link><i class="fas fa-plus-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.0/>Version 1.0 Release Notes</a></p><ul class=side-menu-sub><li class="side-menu-list hide" data-url-parent=/release-notes/version-1.0/v1.0.0/><p class=side-menu__item__link><i class="far fa-square" aria-hidden=true></i><a href=../../../../../release-notes/version-1.0/v1.0.0/ class=side-menu__item__link__text data-url-info=/release-notes/version-1.0/v1.0.0/>V1.0.0 Release Notes</a></p></li></ul></li></ul></li></ul></div><div class=content><div class=breadcrumb><ul class=breadcrumbs><li>You are here: <a href=../../../../../>Docs (V3.2)</a></li><li><a href=../../../../../data-layer/>Data Layer</a></li><li><a href=../../../../../data-layer/reference/>Data-Layer References</a></li><li><a href=../../../../../data-layer/reference/spark-apis/>Spark API References</a></li><li><a href=../../../../../data-layer/reference/spark-apis/spark-datasets/>Spark Datasets Python and Scala API References</a></li><li><a href=../../../../../data-layer/reference/spark-apis/spark-datasets/nosql-dataframe/>The NoSQL Spark DataFrame</a></li></ul></div><div class=page-title><h1 class=content-title>The NoSQL Spark DataFrame</h1></div><div class=toc><div class=mini-toc><div class=mini-toc-header><i class="fas fa-caret-right laptop" aria-hidden=true></i><span>On This Page</span>
<i class="fas fa-caret-right desktop" aria-hidden=true></i></div><nav role=navigation id=TableOfContents><ul class=toc-js></ul></nav></div></div><div class=doc-content><h2 id=intro>Introduction</h2><p>The platform includes the Iguazio Spark connector, which defines a custom Spark <a href=#data-source>data source</a> for reading and writing NoSQL data in the platform's NoSQL store using Spark DataFrames.
A Spark DataFrame of this data-source format is referred to in the documentation as a <strong>NoSQL DataFrame</strong>.
This data source supports data pruning and filtering (predicate pushdown), which allows Spark queries to operate on a smaller amount of data; only the data that is required by the active job is loaded.
The data source also allows you to work with <a href=#partitioned-tables>partitioned tables</a>; perform <a href=#option-columnUpdate>"replace" mode</a> and <a href=#conditional-updates>conditional</a> item updates; define specific item attributes as <a href=#counter-attributes>counter attributes</a> and easily increment or decrement their values; and perform optimized <a href=#range-scans>range scans</a>.</p><h2 id=data-source>Data Source</h2><p>To use the Iguazio Spark connector to read or write NoSQL data in the platform, use the <func>format</func> method to set the DataFrame's data-source format to the platform's custom NoSQL data source  <nobr><code>"io.iguaz.v3io.spark.sql.kv"</code></nobr>.
See the following read and write examples:</p><p><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>
<span class=k>val</span> <span class=n>spark</span> <span class=k>=</span> <span class=nc>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=o>(</span><span class=s>&#34;My Spark Application&#34;</span><span class=o>).</span><span class=n>getOrCreate</span><span class=o>()</span>
<span class=k>val</span> <span class=n>df</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
<span class=hl>    <span class=o>.</span><span class=n>load</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/src_table&#34;</span><span class=o>)</span>
</span><span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;id&#34;</span><span class=o>).</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/dest_table&#34;</span><span class=o>)</span></code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>
<span class=n>spark</span> <span class=o>=</span> <span class=n>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=p>(</span><span class=s2>&#34;My Spark Application&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>getOrCreate</span><span class=p>()</span>
<span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
<span class=hl>    <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/src_table&#34;</span><span class=p>)</span>
</span><span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;id&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/dest_table&#34;</span><span class=p>)</span></code></pre></div></div></div></div></p><h2 id=table-paths>Table Paths</h2><p>Specify the path to the NoSQL table that is associated with the DataFrame as a fully qualified <code>v3io</code> path of the following format  where <code>&lt;container name></code> is the name of the table's parent data container and <code>&lt;data path></code> is the relative path to the table within the specified container (see <a href=../../../../../data-layer/reference/spark-apis/spark-datasets/overview/#data-paths>Data Paths</a> in the Spark Datasets overview):</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>v3io://&lt;container name&gt;/&lt;table path&gt;
</code></pre></div><h3 id=table-path-examples>Examples</h3><p>The following example uses a Spark DataFrame to create a NoSQL table named "cars" in a <dirname>mydata</dirname> directory in the "projects" container, and then reads the contents of the table into a DataFrame:</p><p><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>val</span> <span class=n>nosql_source</span> <span class=k>=</span> <span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span>
<span class=k>var</span> <span class=n>table_path</span> <span class=k>=</span> <span class=s>&#34;v3io://projects/mydata/cars/&#34;</span>

<span class=k>val</span> <span class=n>writeDF</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>(</span>
    <span class=o>(</span><span class=s>&#34;7843321&#34;</span><span class=o>,</span> <span class=s>&#34;Honda&#34;</span><span class=o>,</span> <span class=s>&#34;Accord&#34;</span><span class=o>,</span> <span class=s>&#34;silver&#34;</span><span class=o>,</span> <span class=mi>123000</span><span class=o>),</span>
    <span class=o>(</span><span class=s>&#34;2899941&#34;</span><span class=o>,</span> <span class=s>&#34;Ford&#34;</span><span class=o>,</span> <span class=s>&#34;Mustang&#34;</span><span class=o>,</span> <span class=s>&#34;white&#34;</span><span class=o>,</span> <span class=mi>72531</span><span class=o>),</span>
    <span class=o>(</span><span class=s>&#34;6689123&#34;</span><span class=o>,</span> <span class=s>&#34;Kia&#34;</span><span class=o>,</span> <span class=s>&#34;Picanto&#34;</span><span class=o>,</span> <span class=s>&#34;red&#34;</span><span class=o>,</span> <span class=mi>29320</span><span class=o>)</span>
<span class=o>)</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;reg_license&#34;</span><span class=o>,</span> <span class=s>&#34;vendor&#34;</span><span class=o>,</span> <span class=s>&#34;model&#34;</span><span class=o>,</span> <span class=s>&#34;color&#34;</span><span class=o>,</span> <span class=s>&#34;odometer&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=n>nosql_source</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;reg_license&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;overwrite&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>

<span class=k>val</span> <span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=n>nosql_source</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>sys</span>
<span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=o>*</span>
<span class=kn>from</span> <span class=nn>pyspark.sql.functions</span> <span class=kn>import</span> <span class=o>*</span>

<span class=n>nosql_source</span> <span class=o>=</span> <span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span>
<span class=n>table_path</span> <span class=o>=</span> <span class=s2>&#34;v3io://projects/mydata/cars/&#34;</span>

<span class=n>writeDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=s2>&#34;7843321&#34;</span><span class=p>,</span> <span class=s2>&#34;Honda&#34;</span><span class=p>,</span> <span class=s2>&#34;Accord&#34;</span><span class=p>,</span> <span class=s2>&#34;silver&#34;</span><span class=p>,</span> <span class=mi>123000</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&#34;2899941&#34;</span><span class=p>,</span> <span class=s2>&#34;Ford&#34;</span><span class=p>,</span> <span class=s2>&#34;Mustang&#34;</span><span class=p>,</span> <span class=s2>&#34;white&#34;</span><span class=p>,</span> <span class=mi>72531</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&#34;6689123&#34;</span><span class=p>,</span> <span class=s2>&#34;Kia&#34;</span><span class=p>,</span> <span class=s2>&#34;Picanto&#34;</span><span class=p>,</span> <span class=s2>&#34;red&#34;</span><span class=p>,</span> <span class=mi>29320</span><span class=p>),</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;reg_license&#34;</span><span class=p>,</span> <span class=s2>&#34;vendor&#34;</span><span class=p>,</span> <span class=s2>&#34;model&#34;</span><span class=p>,</span> <span class=s2>&#34;color&#34;</span><span class=p>,</span> <span class=s2>&#34;odometer&#34;</span><span class=p>])</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>nosql_source</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;reg_license&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;overwrite&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>nosql_source</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div></div></div></div></p><p>The following code shows several equivalent alternatives for changing the table path from the previous example to a "cars" table in the running-user directory of the "users" container; (note the Python code requires that you add <nobr><code>import os</code></nobr>).
All variations except for the first one use environment variables instead of explicitly specifying the name of the running user ("iguazio" in the example):</p><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=n>table_path</span> <span class=k>=</span> <span class=s>&#34;v3io://users/iguazio/cars&#34;</span>
<span class=n>table_path</span> <span class=k>=</span> <span class=s>&#34;v3io://users/&#34;</span> <span class=o>+</span> <span class=nc>System</span><span class=o>.</span><span class=n>getenv</span><span class=o>(</span><span class=s>&#34;V3IO_USERNAME&#34;</span><span class=o>)</span> <span class=o>+</span> <span class=s>&#34;/cars&#34;</span>
<span class=n>table_path</span> <span class=k>=</span> <span class=s>&#34;v3io://&#34;</span> <span class=o>+</span> <span class=nc>System</span><span class=o>.</span><span class=n>getenv</span><span class=o>(</span><span class=s>&#34;V3IO_HOME&#34;</span><span class=o>)</span> <span class=o>+</span> <span class=s>&#34;/cars&#34;</span>
<span class=n>table_path</span> <span class=k>=</span> <span class=nc>System</span><span class=o>.</span><span class=n>getenv</span><span class=o>(</span><span class=s>&#34;V3IO_HOME_URL&#34;</span><span class=o>)</span> <span class=o>+</span> <span class=s>&#34;/cars&#34;</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>table_path</span> <span class=o>=</span> <span class=s2>&#34;v3io://users/iguazio/cars&#34;</span>
<span class=n>table_path</span> <span class=o>=</span> <span class=s2>&#34;v3io://users/&#34;</span> <span class=o>+</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&#34;V3IO_USERNAME&#34;</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;/cars&#34;</span>
<span class=n>table_path</span> <span class=o>=</span> <span class=s2>&#34;v3io://&#34;</span> <span class=o>+</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&#34;V3IO_HOME&#34;</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;/cars&#34;</span>
<span class=n>table_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&#34;V3IO_HOME_URL&#34;</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;/cars&#34;</span>
</code></pre></div></div></div></div><p>For additional examples, see the <a href=#examples>Examples</a> section on this page.</p><h2 id=save-modes>Save Modes</h2><p>The Iguazio Spark connector supports the standard Spark DataFrame save modes, which can be set using the Spark DataFrame <func>mode</func> method when writing data from a NoSQL DataFrame to a table.
For more information and examples, see the <a href=https://spark.apache.org/docs/3.1.2/sql-programming-guide.html#save-modes>Spark SQL, DataFrames and Datasets Guide</a> and the NoSQL DataFrame <a href=#write-examples>write examples</a>.</p><div class="admonition note" id=spark-nosql-df-append-save-mode-diffs><div class=admonition-title>Note</div><div class=admonition-content>In some situations  such as when using the <a href=#option-columnUpdate><opt>columnUpdate</opt></a> or <a href=#option-counter><opt>counter</opt></a> write options  the <opt>append</opt> save mode behaves differently when used with the Iguazio Spark connector, as outlined in the platform documentation.</div></div><h2 id=options>Options</h2><p>Use the Spark DataFrame <func>option</func> method to configure relevant options.
See the Apache Spark Datasets documentation for the built-in options.
In addition, the Iguazio Spark connector supports the following custom NoSQL DataFrame options:</p><div class=small-heading id=custom-spark-nosql-df-read-options>Read Options</div><dl><dt id=option-inferSchema>inferSchema</dt><dd><p>Set this option to <code>true</code> (<code>option("inferSchema", "true")</code>) to instruct the platform to infer the schema of the NoSQL data that is being read.
See <a href=#inferring-the-table-schema>Inferring the Table Schema</a>.</p><ul><li><strong>Type:</strong> Boolean</li></ul><ul><li><strong>Requirement:</strong> Optional</li></ul></dd></dl><div class=small-heading id=custom-spark-nosql-df-write-options>Write Options</div><dl><dt id=option-key>key</dt><dd><p>The name of the table's sharding-key attribute (for example, <code>username</code>).
This option is used together with the optional <a href=#option-sorting-key><opt>sorting-key</opt></a> option to define the table's primary key, which uniquely identifies items within the table (see <a href=../../../../../data-layer/reference/spark-apis/spark-datasets/overview/#spark-dataframes-and-tables>Spark DataFrames and Tables</a>).</p><p>For example, for a DataFrame item (row) with a <attr>username</attr> attribute (column) whose value is <code>"johnd"</code>, calling <code>option("key", "username")</code> without setting the <opt>sorting-key</opt> option defines a simple <code>username</code> primary key and sets the item's primary-key value (name) to <code>johnd</code>.</p><div class="admonition note" id=key-option-notes><div class=admonition-title>Note</div><div class=admonition-content><ul><li><p><a id=key-option-matching-df-column-n-no-value-edits-note></a>The written DataFrame must contain a compatible attribute (column) whose name matches the value of the <opt>key</opt> option.
Do not modify the value of this attribute after the item's ingestion, as this will result in a mismatch with the item's name and primary-key value (which remains unchanged).</p></li><li><p><a id=sharding-key-no-periods-note></a>The value of the sharding-key attribute cannot contain periods, because the leftmost period in an item's primary-key value is assumed to be a separator between sharding and sorting keys.</p></li><li><p><a id=primary-key-best-practices-note></a>See the primary-key guidelines in the <a href=../../../../../data-layer/objects/object-names-and-keys/best-practices-primary-keys-n-workload-distribution/#string-sorting-key-for-faster-range-scan-queries>Best Practices for Defining Primary Keys and Distributing Data Workloads</a> guide.</p></li></ul></div></div><ul><li><strong>Type:</strong> String</li></ul><ul><li><strong>Requirement:</strong> Required</li></ul></dd><dt id=option-sorting-key>sorting-key</dt><dd><p>The name of the table's sorting-key attribute (for example, <code>login-date</code>).
This option can optionally be used together with the <a href=#option-key><opt>key</opt></a> option to define a compound primary key, which uniquely identifies items within the table (see <a href=../../../../../data-layer/reference/spark-apis/spark-datasets/overview/#spark-dataframes-and-tables>Spark DataFrames and Tables</a>).</p><p>For example, for a DataFrame item (row) with a <attr>username</attr> attribute whose value is <code>"johnd"</code> and a <attr>login-date</attr> attribute whose value is <code>"20180125"</code>, calling both <code>option("key", "username")</code> and <code>option("sorting-key", "login-date")</code> defines a compound <code>username.login-date</code> primary key and sets the item's primary-key value (name) to <code>johnd.20180125</code>.
When using the even-distribution write option, the item's primary-key value will be <code>johnd_&lt;n>.20180125</code> (for example, <code>johnd_2.20180125</code>)  see <a href=#even-workload-distribution>Even Workload Distribution</a>.</p><div class="admonition note" id=sorting-key-option-notes><div class=admonition-title>Note</div><div class=admonition-content><ul><li><p><a id=sorting-key-option-matching-df-column-n-no-value-edits-note></a>The written DataFrame must contain a compatible attribute (column) whose name matches the value of the <opt>sorting-key</opt> option.
Do not modify the value of this attribute after the item's ingestion, as this will result in a mismatch with the item's name and primary-key value.</p></li><li><p><a id=sorting-key-for-compound-primary-n-range-scans-n-best-practices-note></a>You must set this option if you wish to define a compound <code>&lt;sharding key>.&lt;sorting key></code> table primary key.
Note that support for <a href=#range-scans>range scans</a> requires a compound primary key and that range scans for tables with a string sorting-key attribute are more efficient.
For more information and best-practice guidelines, see <a href=../../../../../data-layer/objects/object-names-and-keys/best-practices-primary-keys-n-workload-distribution/#string-sorting-key-for-faster-range-scan-queries>Best Practices for Defining Primary Keys and Distributing Data Workloads</a>.</p></li></ul></div></div><ul><li><strong>Type:</strong> String</li></ul><ul><li><strong>Requirement:</strong> Optional</li></ul></dd><dt id=option-allow-overwrite-schema>allow-overwrite-schema</dt><dd><p>Set this option to <code>true</code> (<code>option("allow-overwrite-schema", "true")</code>) to instruct the platform to overwrite the current schema of the target table (if exists) with the schema that is automatically inferred from the contents of the DataFrame.
By default, if the inferred schema differs from an existing schema for the same table, the existing schema isn't overwritten and the write fails  see <a href=#overwriting-a-table-schema>Overwriting an Existing Table Schema</a>.</p><ul><li><strong>Type:</strong> Boolean</li></ul><ul><li><strong>Requirement:</strong> Optional</li></ul></dd><dt id=option-columnUpdate>columnUpdate</dt><dd><p>Set this option to <code>true</code> (<code>option("columnUpdate", "true")</code>) together with the <opt>append</opt> <a href=#save-modes>save mode</a> for a custom replace mode  append new items and overwrite existing items (similar to the update logic of the <a href=#option-counter><opt>counter</opt></a> option).
See the <a href=#write-example-replace-mode>replace-mode write example</a>.</p><ul><li><strong>Type:</strong> Boolean</li></ul><ul><li><strong>Requirement:</strong> Optional</li></ul></dd><dt id=option-condition>condition</dt><dd><p>A Boolean condition expression that defines a conditional logic for executing the write operation.
See <a href=../../../../../data-layer/reference/expressions/condition-expression/>Condition Expression</a> for syntax details and examples.
As explained in the expression reference documentation, attributes in the target table item are referenced in the expression by using the attribute name.
To reference a column (attribute) in the write DataFrame from within the expression, use the syntax <nobr><code>${&lt;column name>}</code></nobr>.
For example, <code>option("condition", "${version} > version)"</code> will write to the table only if the table has a matching item (identified by its name  see the <paramname><a href=#option-key>key</a></paramname> option) whose current <attr>version</attr> attribute value is lower than the value of the <attr>version</attr> column (attribute) in the Spark DataFrame.
For more information, see <a href=#conditional-updates>Conditional Updates</a> and the <a href=#write-example-condition>conditional-update write example</a>.</p><ul><li><strong>Type:</strong> String</li></ul><ul><li><strong>Requirement:</strong> Optional</li></ul></dd><dt id=option-counter>counter</dt><dd><p>A comma-separated list of one or more attribute (column) names that identify counter attributes.
For example, <code>option("counter", "odometer, loops")</code> identifies <attr>odometer</attr> and <attr>loops</attr> as counter attributes.
For more information, see <a href=#counter-attributes>Counter Attributes</a> and the <a href=#write-example-counters>counter-attributes write example</a>.</p><div class="admonition note"><div class=admonition-title>Note</div><div class=admonition-content><ul><li>Counter attributes must have numeric values.</li><li>The <opt>counter</opt> option is supported only with the NoSQL DataFrame <opt>append</opt> <a href=#save-modes>save mode</a>, which for counter attributes functions as a custom replace mode (similar to the update logic of the <a href=#option-columnUpdate><opt>columnUpdate</opt></a> option).</li><li>The DataFrame should contain a value for each of the specified counter attributes.
This value will be added to or subtracted from the attribute's current value, or used as the initial attribute value if the attribute doesn't already exist in the table.</li></ul></div></div><ul><li><strong>Type:</strong> String</li></ul><ul><li><strong>Requirement:</strong> Optional</li></ul></dd><dt id=option-partition>partition</dt><dd><p><span class=tech-preview><nobr>[Tech Preview]</nobr></span> A comma-separated list of one or more attribute (column) names that identify partition attributes.
The written items are saved to <path>&lt;table path>/&lt;attribute>=&lt;value>[/&lt;attribute>=&lt;value>/...]</path> partition directories according to the values of the items' partition attributes.
Note that the order of the partition attribute names in the option string determines the partitioning hierarchy.
For example, <code>option("partition", "year, month, day, hour")</code> identifies <attr>year</attr>, <attr>month</attr>, <attr>day</attr>, and <attr>hour</attr> as partition attributes and saves items in <path>year=&lt;value>/month=&lt;value>/day=&lt;value>/hour=&lt;value></path> partitions (such as <path>mytable/year=2018/month=2/day=12/hour=21</path>) within the root table directory.
For more information and examples, see <a href=#partitioned-tables>Partitioned Tables</a>.</p><ul><li><strong>Type:</strong> String</li></ul><ul><li><strong>Requirement:</strong> Optional</li></ul></dd><dt id=option-range-scan-even-distribution>range-scan-even-distribution</dt><dd><p>Set this option to <code>true</code> (<code>option("range-scan-even-distribution", "true")</code>) to instruct the platform to distribute items with the same sharding-key attribute value among multiple data slices, to achieve a more even distribution of non-uniform data.
This option is applicable only for tables with a compound <code>&lt;sharding key>.&lt;sorting key></code> primary key, which can be created by using both the <a href=#option-key><opt>key</opt></a> and <a href=#option-sorting-key><opt>sorting-key</opt></a> write options.
For more information, see <a href=#even-workload-distribution>Even Workload Distribution</a>.</p><ul><li><strong>Type:</strong> Boolean</li></ul><ul><li><strong>Requirement:</strong> Optional</li></ul></dd></dl><h2 id=defining-the-table-schema>Defining the Table Schema</h2><p>Spark DataFrames handle structured data.
Therefore, Spark needs to be aware of the schema of the data structure.
When writing NoSQL data by using the platform's Spark DataFrame or Frames APIs, the schema of the data table is automatically identified and saved and then retrieved when reading the data with a Spark DataFrame, Frames, or Presto (unless you select to explicitly define the schema for the read operation).
However, to use a Spark DataFrame, Frames, or Presto to read NoSQL data that was written to a table in another way, you first need to define the table schema.
You can use either of the following alternative methods to define or update the schema of a NoSQL table as part of a NoSQL DataFrame read operation:</p><ul><li>Use the custom <opt>inferSchema</opt> option to <a href=#inferring-the-table-schema>infer the schema</a> (recommended).</li><li><a href=#defining-the-table-schema-programmatically>Define the schema programmatically</a> as part of the Spark DataFrame read operation.
(You can also do this for data that was written using a Spark DataFrame in the platform, although it's not required.)</li></ul><p>For more information, see the <a href=../../../../../data-layer/reference/nosql-table-schema/>NoSQL Table Schema Reference</a>.</p><h3 id=overwriting-a-table-schema>Overwriting an Existing Table Schema</h3><p>By default, if the schema inferred from the DataFrame's contents during a write operation differs from the table's current schema  as defined in its schema file (if such a file exists)  the write fails.
This is designed to protect against inadvertent schema changes.
However, you can override this default behavior by using the custom <a href=#option-allow-overwrite-schema><opt>allow-overwrite-schema</opt></a> write option, which forces an overwrite of the current table schema with the inferred schema.</p><h4 id=schema-overwrite-examples>Table Schema-Overwrite Examples</h4><p>The following example creates a "mytable" table in a "mycontainer" data container with <attr>AttrA</attr> and <attr>AttrB</attr> attributes of type string and an <attr>AttrC</attr> attribute of type long, and then overwrites the table schema to change the type of <attr>AttrC</attr> to double:</p><p><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>

<span class=k>var</span> <span class=n>df</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>((</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=s>&#34;z&#34;</span><span class=o>,</span> <span class=mi>123</span><span class=o>),</span> <span class=o>(</span><span class=s>&#34;b&#34;</span><span class=o>,</span> <span class=s>&#34;y&#34;</span><span class=o>,</span> <span class=mi>456</span><span class=o>))</span>
    <span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;AttrA&#34;</span><span class=o>,</span> <span class=s>&#34;AttrB&#34;</span><span class=o>,</span> <span class=s>&#34;AttrC&#34;</span><span class=o>)</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;overwrite&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;AttrA&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/mytable/&#34;</span><span class=o>)</span>

<span class=n>df</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>((</span><span class=s>&#34;c&#34;</span><span class=o>,</span> <span class=s>&#34;x&#34;</span><span class=o>,</span> <span class=mf>32.12</span><span class=o>),</span> <span class=o>(</span><span class=s>&#34;d&#34;</span><span class=o>,</span> <span class=s>&#34;v&#34;</span><span class=o>,</span> <span class=mf>45.2</span><span class=o>))</span>
    <span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;AttrA&#34;</span><span class=o>,</span> <span class=s>&#34;AttrB&#34;</span><span class=o>,</span> <span class=s>&#34;AttrC&#34;</span><span class=o>)</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;append&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;AttrA&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;allow-overwrite-schema&#34;</span><span class=o>,</span> <span class=s>&#34;true&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/mytable/&#34;</span><span class=o>)</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>

<span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;z&#34;</span><span class=p>,</span> <span class=mi>123</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;y&#34;</span><span class=p>,</span> <span class=mi>456</span><span class=p>)</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;AttrA&#34;</span><span class=p>,</span> <span class=s2>&#34;AttrB&#34;</span><span class=p>,</span> <span class=s2>&#34;AttrC&#34;</span><span class=p>])</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;overwrite&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;AttrA&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/mytable/&#34;</span><span class=p>)</span>
    
<span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=s2>&#34;c&#34;</span><span class=p>,</span> <span class=s2>&#34;x&#34;</span><span class=p>,</span> <span class=mf>32.12</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&#34;d&#34;</span><span class=p>,</span> <span class=s2>&#34;v&#34;</span><span class=p>,</span> <span class=mf>45.2</span><span class=p>)</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;AttrA&#34;</span><span class=p>,</span> <span class=s2>&#34;AttrB&#34;</span><span class=p>,</span> <span class=s2>&#34;AttrC&#34;</span><span class=p>])</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;append&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;AttrA&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;allow-overwrite-schema&#34;</span><span class=p>,</span> <span class=s2>&#34;true&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/mytable/&#34;</span><span class=p>)</span>
</code></pre></div></div></div></div></p><p><div class="admonition note"><div class=admonition-title>Note</div><div class=admonition-content><p>If you remove or comment out the <code>option("allow-overwrite-schema", "true")</code> call in the second write command, the write will fail with the following schema-mismatch error:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>java.lang.RuntimeException: Note you are about the rewrite existing schema file.
           old <span class=nv>schema</span> <span class=o>=</span> Schema<span class=o>(</span>List<span class=o>(</span>Field<span class=o>(</span>AttrA,string,false,None<span class=o>)</span>, Field<span class=o>(</span>AttrB,string,true,None<span class=o>)</span>, Field<span class=o>(</span>AttrC,long,false,None<span class=o>))</span>,AttrA,None,0<span class=o>)</span>
           new <span class=nv>schema</span> <span class=o>=</span> Schema<span class=o>(</span>ArraySeq<span class=o>(</span>Field<span class=o>(</span>AttrA,string,false,None<span class=o>)</span>, Field<span class=o>(</span>AttrB,string,true,None<span class=o>)</span>, Field<span class=o>(</span>AttrC,double,false,None<span class=o>))</span>,AttrA,None,0<span class=o>)</span>.
</code></pre></div></div></div></p><h3 id=inferring-the-table-schema>Inferring the Table Schema</h3><p>You can use the custom NoSQL DataFrame <a href=#option-inferSchema><opt>inferSchema</opt></a> read option to automatically infer the schema of the read table from its contents.</p><h4 id=infer-schema-examples>Infer-Schema Examples</h4><p>The following example uses a Spark DataFrame to read data from a NoSQL "employees" table in a "department_store" data container.</p><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>

<span class=k>val</span> <span class=n>spark</span> <span class=k>=</span> <span class=nc>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=o>(</span><span class=s>&#34;My Spark Application&#34;</span><span class=o>).</span><span class=n>getOrCreate</span><span class=o>()</span>

<span class=k>val</span> <span class=n>myDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;inferSchema&#34;</span><span class=o>,</span> <span class=s>&#34;true&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>load</span><span class=o>(</span><span class=s>&#34;v3io://department_store/employees&#34;</span><span class=o>)</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>

<span class=n>spark</span> <span class=o>=</span> <span class=n>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=p>(</span><span class=s2>&#34;My Spark Application&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>getOrCreate</span><span class=p>()</span>

<span class=n>myDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;inferSchema&#34;</span><span class=p>,</span> <span class=s2>&#34;true&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;v3io://department_store/employees&#34;</span><span class=p>)</span>
</code></pre></div></div></div></div><p>To generate a schema file from the inferred schema, you can write back the content of the read DataFrame to the same table using the <opt>append</opt> save mode; the write operation automatically creates a schema file if it doesn't exist.
For efficiency, use <code>limit(0)</code> to write only the schema file:</p><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=n>myDF</span><span class=o>.</span><span class=n>limit</span><span class=o>(</span><span class=mi>0</span><span class=o>).</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;append&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;employee_id&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://department_store/employees&#34;</span><span class=o>)</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>myDF</span><span class=o>.</span><span class=n>limit</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;append&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;employee_id&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://department_store/employees&#34;</span><span class=p>)</span>
</code></pre></div></div></div></div><h3 id=defining-the-table-schema-programmatically>Defining the Table Schema Programmatically</h3><p>You can define a NoSQL DataFrame's table schema programmatically by using the Spark DataFrame <func>schema</func> method as part of a read operation:
in your code, you can define a schema variable of the relevant list type, and populate it with structures that provide the required information about the table's attributes (columns).
Then, pass the variable as a parameter to the DataFrame <func>schema</func> read method  for example, for a <code>schema</code> variable, you can call <code>schema(schema)</code>.
See <a href=../../../../../data-layer/reference/nosql-table-schema/#schema-object-fields>The Item-Attributes Schema Object ('fields')</a> reference and the following <a href=#programmatic-table-schema-definition-examples>examples</a>.</p><div class="admonition note" id=programmatic-schema-def-range-scan-n-even-distribution-note><div class=admonition-title>Note</div><div class=admonition-content>Programmatically created table schemas don't support <a href=#range-scans>range-scan</a> or <a href=#even-workload-distribution>even-distribution</a> table queries.</div></div><h4 id=programmatic-table-schema-definition-examples>Programmatic Table-Schema Definition Examples</h4><p>The following example uses a Spark DataFrame to read data from a NoSQL "employees" table in a "department_store" data container.
The table has five attributes (columns), which are depicted using the <code>schema</code> variable:</p><ul><li>"id"  a numeric employee ID, which serves as the table's primary key and isn't nullable.</li><li>"firstname"  the employee's first name, depicted as a string.</li><li>"lastname"  the employee's last name, depicted as a string.</li><li>"department"  the department to which the employee belongs, depicted as a string .</li><li>"managerid"  the numeric ID of the employee's manager.</li></ul><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>
<span class=k>import</span> <span class=nn>org.apache.spark.sql.types._</span>

<span class=k>val</span> <span class=n>spark</span> <span class=k>=</span> <span class=nc>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=o>(</span><span class=s>&#34;My Spark Application&#34;</span><span class=o>).</span><span class=n>getOrCreate</span><span class=o>()</span>

<span class=k>val</span> <span class=n>schema</span> <span class=k>=</span> <span class=nc>StructType</span><span class=o>(</span><span class=nc>List</span><span class=o>(</span>
    <span class=nc>StructField</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>,</span> <span class=nc>LongType</span><span class=o>,</span> <span class=n>nullable</span> <span class=k>=</span> <span class=kc>false</span><span class=o>),</span>
    <span class=nc>StructField</span><span class=o>(</span><span class=s>&#34;firstname&#34;</span><span class=o>,</span> <span class=nc>StringType</span><span class=o>,</span> <span class=n>nullable</span> <span class=k>=</span> <span class=kc>true</span><span class=o>),</span>
    <span class=nc>StructField</span><span class=o>(</span><span class=s>&#34;lastname&#34;</span><span class=o>,</span> <span class=nc>StringType</span><span class=o>,</span> <span class=n>nullable</span> <span class=k>=</span> <span class=kc>true</span><span class=o>),</span>
    <span class=nc>StructField</span><span class=o>(</span><span class=s>&#34;department&#34;</span><span class=o>,</span> <span class=nc>StringType</span><span class=o>,</span> <span class=n>nullable</span> <span class=k>=</span> <span class=kc>true</span><span class=o>),</span>
    <span class=nc>StructField</span><span class=o>(</span><span class=s>&#34;managerid&#34;</span><span class=o>,</span> <span class=nc>LongType</span><span class=o>,</span> <span class=n>nullable</span> <span class=k>=</span> <span class=kc>true</span><span class=o>)))</span>
<span class=k>val</span> <span class=n>myDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>schema</span><span class=o>(</span><span class=n>schema</span><span class=o>)</span>
    <span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>load</span><span class=o>(</span><span class=s>&#34;v3io://department_store/employees&#34;</span><span class=o>)</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>sys</span>
<span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>
<span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=o>*</span>
<span class=kn>from</span> <span class=nn>pyspark.sql.types</span> <span class=kn>import</span> <span class=o>*</span>
<span class=kn>from</span> <span class=nn>pyspark.sql.functions</span> <span class=kn>import</span> <span class=o>*</span>

<span class=n>spark</span> <span class=o>=</span> <span class=n>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=p>(</span><span class=s2>&#34;My Spark Application&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>getOrCreate</span><span class=p>()</span>

<span class=n>schema</span> <span class=o>=</span> <span class=n>StructType</span><span class=p>([</span>
    <span class=n>StructField</span><span class=p>(</span><span class=s2>&#34;id&#34;</span><span class=p>,</span> <span class=n>LongType</span><span class=p>(),</span> <span class=bp>False</span><span class=p>),</span>
    <span class=n>StructField</span><span class=p>(</span><span class=s2>&#34;firstname&#34;</span><span class=p>,</span> <span class=n>StringType</span><span class=p>(),</span> <span class=bp>True</span><span class=p>),</span>
    <span class=n>StructField</span><span class=p>(</span><span class=s2>&#34;lastname&#34;</span><span class=p>,</span> <span class=n>StringType</span><span class=p>(),</span> <span class=bp>True</span><span class=p>),</span>
    <span class=n>StructField</span><span class=p>(</span><span class=s2>&#34;department&#34;</span><span class=p>,</span> <span class=n>StringType</span><span class=p>(),</span> <span class=bp>True</span><span class=p>),</span>
    <span class=n>StructField</span><span class=p>(</span><span class=s2>&#34;managerid&#34;</span><span class=p>,</span> <span class=n>LongType</span><span class=p>(),</span> <span class=bp>True</span><span class=p>)])</span>
<span class=n>myDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>schema</span><span class=p>(</span><span class=n>schema</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;v3io://department_store/employees&#34;</span><span class=p>)</span>
</code></pre></div></div></div></div><p>For additional examples, see the read examples in the <a href=../../../../../data-layer/spark-data-ingestion-qs/#reading-the-data>Getting Started with Data Ingestion Using Spark</a> tutorial.</p><h2 id=conditional-updates>Conditional Updates</h2><p>You can use the custom <a href=#option-condition><opt>condition</opt></a> write option of the NoSQL Spark DataFrame to perform conditional item updates, whereby the write operation will be executed only if the specified condition expression evaluates to <code>true</code>.</p><p>The condition expression is evaluated against the table item to be updated, if it exists.
If the condition evaluates to <code>true</code>, the write operation is executed and the item is updated or created; otherwise, the operation completes successfully without an update.<div class="admonition note" id=conditional-update-notes><div class=admonition-title>Note</div><div class=admonition-content><ul><li>If the expression references a non-existent item attribute, the condition processing stops and the operation completes successfully without updating or creating the item.</li><li>If the item doesn't exist and the condition expression doesn't reference any attributes (for example, a <code>"1==1"</code> or <code>"2==3"</code> expression, which could potentially be auto generated in some programming scenarios), the operation completes successfully and the item is updated or created only if the condition evaluates to <code>true</code>.</li></ul></div></div></p><p>See the NoSQL DataFrame <a href=#write-example-condition>conditional-update write example</a>.</p><h2 id=counter-attributes>Counter Attributes</h2><p>The Iguazio Spark connector enhances the standard Spark DataFrame by allowing you to define numeric attributes (columns) in a table as counter attributes and easily increment or decrement the attributes' values.
This is done by using the custom <a href=#option-counter><opt>counter</opt></a> write option of the NoSQL DataFrame to name one or more attributes as counter attributes.</p><p>The <opt>counter</opt> option is supported only with the NoSQL DataFrame <opt>append</opt> <a href=#save-modes>save mode</a>.
However, the significance of this mode when using the <opt>counter</opt> option is different than the standard Spark DataFrame behavior (for both counter and non-counter attributes):</p><ul><li><strong>If a DataFrame attribute isn't already found in the table</strong>, the attribute is added to the table and initialized to the value set for it in the DataFrame.
If the table or item don't exist, they're created and updated with the DataFrame's contents.
This is the standard append save-mode behavior ant it's the same for both counter and non-counter attributes.</li><li><strong>If a DataFrame counter attribute is already found in the table</strong>, its value is incremented or decremented according to the value that was set for this attribute in the DataFrame  i.e., the attribute value indicates the increment or decrement step (a negative value = decrement).</li><li><strong>If a DataFrame non-counter attribute is already found in the table</strong>, its value is overwritten with the value that was set for it in the DataFrame but other attributes in the table remain unaffected (i.e., replace mode, similar to an <opt>append</opt> write with the <a href=#option-columnUpdate><opt>columnUpdate</opt></a> option.)</li></ul><p>See the NoSQL DataFrame <a href=#write-example-counters>counter-attributes write example</a>.</p><h2 id=partitioned-tables>Partitioned Tables <nobr>[Tech Preview]</nobr></h2><p><p>Table partitioning is a common technique for optimizing physical data layout and related queries. In a partitioned table, some item attributes (columns) are used to create partition directories within the root table directory using the format <path>&lt;table path>/&lt;attribute>=&lt;value>[/&lt;attribute>=&lt;value>/...]</path>, and each item is then saved to the respective partition directory based on its attribute values. For example, for a "mytable" table with <attr>year</attr> and <attr>month</attr> attribute partitions, an item with attributes <attr>year</attr> = 2018 and <attr>month</attr> = 1 will be saved to a <path>mytable/year=2018/month=1/</path> directory. This allows for more efficient data queries that search for the data only in the relevant partition directories instead of scanning the entire table. This technique is used, for example, by Hive, and is supported for all the built-in Spark Dataset file-based data sources (such as Parquet, CSV, and JSON) via the <opt>partitionBy</opt> write method. See also the <a href=../../../../../data-layer/nosql/#partitioned-tables>Partitioned Tables</a> documentation on the Working with NoSQL Data page, including <a href=../../../../../data-layer/nosql/#table-partitioning-best-practices>best practices</a>.</p></p><p>The Iguazio Spark connector supports table partitioning for the NoSQL DataFrame <span class=tech-preview><nobr>[Tech Preview]</nobr></span>:</p><ul><li><strong>Creating a partitioned table</strong>  the custom NoSQL DataFrame <a href=#option-partition><opt>partition</opt></a> option allows you to select specific item attributes (columns) in a write DataFrame to be used as partitions.
When using this option, the platform creates the necessary partition directory path for each written item.
(Note that after you define partitions for a table, you need to specify the same partitions whenever your write to this table unless you decide to overwrite it.)</li><li><strong>Querying a partitioned table</strong>  a partitioned table is queried like any other table, with the table path set to the root table directory and not to a specific partition directory.
Version 3.2.1 of the platform doesn't support using using wild cards in the table path, such as <code>"mytable/year=*/month=5"</code> to search the <dirname>month=5</dirname> directories in all <path>mytable/year="value"</path> directories.
However, you can easily restrict the query to specific partition directories by using the Spark DataFrame <func>filter</func> method with a filter that references one of the partition attributes.
In such cases, the platform searches the root table directory that is specified in the read command for nested directories of the format <path>&lt;attribute>=&lt;value></path>.
If it finds such directories, it searches only the partition directories that match the query.
For example, for a table partitioned by <attr>year</attr> and <attr>month</attr> attributes, a <code>month == 12</code> filter will return only the items from the <dirname>month=12</dirname> partition directories in all <dirname>year=*</dirname> directories.</li></ul><h3 id=table-partitioning-examples>Table-Partitioning Examples</h3><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>

<span class=k>val</span> <span class=n>spark</span> <span class=k>=</span> <span class=nc>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=o>(</span><span class=s>&#34;Table-Partitioning Example&#34;</span><span class=o>).</span><span class=n>getOrCreate</span><span class=o>()</span>
<span class=k>val</span> <span class=n>table_path</span> <span class=k>=</span> <span class=s>&#34;v3io://mycontainer/weather/&#34;</span>

<span class=k>val</span> <span class=n>df</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>(</span>
    <span class=o>(</span><span class=mi>2016</span><span class=o>,</span>  <span class=mi>3</span><span class=o>,</span> <span class=mi>25</span><span class=o>,</span>  <span class=mi>6</span><span class=o>,</span> <span class=mi>16</span><span class=o>,</span> <span class=mf>0.00</span><span class=o>,</span> <span class=mi>55</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2016</span><span class=o>,</span>  <span class=mi>3</span><span class=o>,</span> <span class=mi>25</span><span class=o>,</span> <span class=mi>17</span><span class=o>,</span> <span class=mi>19</span><span class=o>,</span> <span class=mf>0.10</span><span class=o>,</span> <span class=mi>62</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2016</span><span class=o>,</span>  <span class=mi>7</span><span class=o>,</span> <span class=mi>24</span><span class=o>,</span>  <span class=mi>7</span><span class=o>,</span> <span class=mi>20</span><span class=o>,</span> <span class=mf>0.00</span><span class=o>,</span> <span class=mi>52</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2016</span><span class=o>,</span> <span class=mi>12</span><span class=o>,</span> <span class=mi>24</span><span class=o>,</span>  <span class=mi>9</span><span class=o>,</span> <span class=mi>10</span><span class=o>,</span> <span class=mf>0.05</span><span class=o>,</span> <span class=mi>47</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2016</span><span class=o>,</span> <span class=mi>12</span><span class=o>,</span> <span class=mi>24</span><span class=o>,</span> <span class=mi>19</span><span class=o>,</span>  <span class=mi>8</span><span class=o>,</span> <span class=mf>0.20</span><span class=o>,</span> <span class=mi>47</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2017</span><span class=o>,</span>  <span class=mi>5</span><span class=o>,</span>  <span class=mi>7</span><span class=o>,</span> <span class=mi>14</span><span class=o>,</span> <span class=mi>21</span><span class=o>,</span> <span class=mf>0.00</span><span class=o>,</span> <span class=mi>70</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2017</span><span class=o>,</span> <span class=mi>11</span><span class=o>,</span>  <span class=mi>1</span><span class=o>,</span> <span class=mi>10</span><span class=o>,</span> <span class=mi>16</span><span class=o>,</span> <span class=mf>0.00</span><span class=o>,</span> <span class=mi>34</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2017</span><span class=o>,</span> <span class=mi>11</span><span class=o>,</span>  <span class=mi>1</span><span class=o>,</span> <span class=mi>22</span><span class=o>,</span> <span class=mi>13</span><span class=o>,</span> <span class=mf>0.01</span><span class=o>,</span> <span class=mi>41</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2017</span><span class=o>,</span> <span class=mi>12</span><span class=o>,</span> <span class=mi>12</span><span class=o>,</span> <span class=mi>16</span><span class=o>,</span> <span class=mi>12</span><span class=o>,</span> <span class=mf>0.00</span><span class=o>,</span> <span class=mi>47</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2017</span><span class=o>,</span> <span class=mi>12</span><span class=o>,</span> <span class=mi>24</span><span class=o>,</span> <span class=mi>17</span><span class=o>,</span> <span class=mi>11</span><span class=o>,</span> <span class=mf>1.00</span><span class=o>,</span> <span class=mi>50</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2018</span><span class=o>,</span>  <span class=mi>1</span><span class=o>,</span> <span class=mi>18</span><span class=o>,</span>  <span class=mi>5</span><span class=o>,</span>  <span class=mi>8</span><span class=o>,</span> <span class=mf>0.00</span><span class=o>,</span> <span class=mi>37</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2018</span><span class=o>,</span>  <span class=mi>1</span><span class=o>,</span> <span class=mi>18</span><span class=o>,</span> <span class=mi>17</span><span class=o>,</span> <span class=mi>10</span><span class=o>,</span> <span class=mf>2.00</span><span class=o>,</span> <span class=mi>45</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2018</span><span class=o>,</span>  <span class=mi>5</span><span class=o>,</span> <span class=mi>20</span><span class=o>,</span> <span class=mi>15</span><span class=o>,</span> <span class=mi>24</span><span class=o>,</span> <span class=mf>0.00</span><span class=o>,</span> <span class=mi>62</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2018</span><span class=o>,</span>  <span class=mi>5</span><span class=o>,</span> <span class=mi>20</span><span class=o>,</span> <span class=mi>21</span><span class=o>,</span> <span class=mi>20</span><span class=o>,</span> <span class=mf>0.00</span><span class=o>,</span> <span class=mi>59</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>2018</span><span class=o>,</span> <span class=mi>11</span><span class=o>,</span>  <span class=mi>1</span><span class=o>,</span> <span class=mi>11</span><span class=o>,</span> <span class=mi>11</span><span class=o>,</span> <span class=mf>0.12</span><span class=o>,</span> <span class=mi>65</span><span class=o>)</span>
<span class=o>).</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;year&#34;</span><span class=o>,</span> <span class=s>&#34;month&#34;</span><span class=o>,</span> <span class=s>&#34;day&#34;</span><span class=o>,</span> <span class=s>&#34;hour&#34;</span><span class=o>,</span> <span class=s>&#34;degrees_cel&#34;</span><span class=o>,</span> <span class=s>&#34;rain_ml&#34;</span><span class=o>,</span> <span class=s>&#34;humidity_per&#34;</span><span class=o>)</span>
<span class=k>val</span> <span class=n>df_with_key</span> <span class=k>=</span> <span class=n>df</span><span class=o>.</span><span class=n>withColumn</span><span class=o>(</span><span class=s>&#34;time&#34;</span><span class=o>,</span> <span class=n>concat</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;year&#34;</span><span class=o>,</span> <span class=n>$</span><span class=s>&#34;month&#34;</span><span class=o>,</span> <span class=n>$</span><span class=s>&#34;day&#34;</span><span class=o>,</span> <span class=n>$</span><span class=s>&#34;hour&#34;</span><span class=o>))</span>
<span class=n>df_with_key</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;overwrite&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;time&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;partition&#34;</span><span class=o>,</span> <span class=s>&#34;year, month, day&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>

<span class=k>var</span> <span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;month&#34;</span> <span class=o>&lt;</span> <span class=mi>7</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;month&#34;</span> <span class=o>===</span> <span class=mi>12</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;day&#34;</span> <span class=o>===</span> <span class=mi>24</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;month&#34;</span> <span class=o>&gt;</span> <span class=mi>6</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;hour&#34;</span> <span class=o>&gt;=</span> <span class=mi>8</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;hour&#34;</span> <span class=o>&lt;=</span> <span class=mi>20</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>sys</span>
<span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>
<span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=o>*</span>
<span class=kn>from</span> <span class=nn>pyspark.sql.functions</span> <span class=kn>import</span> <span class=o>*</span>

<span class=n>spark</span> <span class=o>=</span> <span class=n>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=p>(</span><span class=s2>&#34;Table-Partitioning Example&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>getOrCreate</span><span class=p>()</span>
<span class=n>table_path</span> <span class=o>=</span> <span class=s2>&#34;v3io://mycontainer/weather/&#34;</span>

<span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=mi>2016</span><span class=p>,</span>  <span class=mi>3</span><span class=p>,</span> <span class=mi>25</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span> <span class=mi>16</span><span class=p>,</span> <span class=mf>0.00</span><span class=p>,</span> <span class=mi>55</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2016</span><span class=p>,</span>  <span class=mi>3</span><span class=p>,</span> <span class=mi>25</span><span class=p>,</span> <span class=mi>17</span><span class=p>,</span> <span class=mi>19</span><span class=p>,</span> <span class=mf>0.10</span><span class=p>,</span> <span class=mi>62</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2016</span><span class=p>,</span>  <span class=mi>7</span><span class=p>,</span> <span class=mi>24</span><span class=p>,</span>  <span class=mi>7</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mf>0.00</span><span class=p>,</span> <span class=mi>52</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2016</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>24</span><span class=p>,</span>  <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mf>0.05</span><span class=p>,</span> <span class=mi>47</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2016</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>24</span><span class=p>,</span> <span class=mi>19</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span> <span class=mf>0.20</span><span class=p>,</span> <span class=mi>47</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2017</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>7</span><span class=p>,</span> <span class=mi>14</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mf>0.00</span><span class=p>,</span> <span class=mi>70</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2017</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>16</span><span class=p>,</span> <span class=mf>0.00</span><span class=p>,</span> <span class=mi>34</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2017</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span> <span class=mi>22</span><span class=p>,</span> <span class=mi>13</span><span class=p>,</span> <span class=mf>0.01</span><span class=p>,</span> <span class=mi>41</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2017</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>16</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mf>0.00</span><span class=p>,</span> <span class=mi>47</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2017</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>24</span><span class=p>,</span> <span class=mi>17</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mf>1.00</span><span class=p>,</span> <span class=mi>50</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2018</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span> <span class=mi>18</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span> <span class=mf>0.00</span><span class=p>,</span> <span class=mi>37</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2018</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span> <span class=mi>18</span><span class=p>,</span> <span class=mi>17</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mf>2.00</span><span class=p>,</span> <span class=mi>45</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2018</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>15</span><span class=p>,</span> <span class=mi>24</span><span class=p>,</span> <span class=mf>0.00</span><span class=p>,</span> <span class=mi>62</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2018</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mf>0.00</span><span class=p>,</span> <span class=mi>59</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2018</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mf>0.12</span><span class=p>,</span> <span class=mi>65</span><span class=p>)</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;year&#34;</span><span class=p>,</span> <span class=s2>&#34;month&#34;</span><span class=p>,</span> <span class=s2>&#34;day&#34;</span><span class=p>,</span> <span class=s2>&#34;hour&#34;</span><span class=p>,</span> <span class=s2>&#34;degrees_cel&#34;</span><span class=p>,</span> <span class=s2>&#34;rain_ml&#34;</span><span class=p>,</span> <span class=s2>&#34;humidity_per&#34;</span><span class=p>])</span>
<span class=n>df_with_key</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>withColumn</span><span class=p>(</span>
    <span class=s2>&#34;time&#34;</span><span class=p>,</span> <span class=n>concat</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s2>&#34;year&#34;</span><span class=p>],</span> <span class=n>df</span><span class=p>[</span><span class=s2>&#34;month&#34;</span><span class=p>],</span> <span class=n>df</span><span class=p>[</span><span class=s2>&#34;day&#34;</span><span class=p>],</span> <span class=n>df</span><span class=p>[</span><span class=s2>&#34;hour&#34;</span><span class=p>]))</span>
<span class=n>df_with_key</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;overwrite&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;time&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;partition&#34;</span><span class=p>,</span> <span class=s2>&#34;year, month, day, hour&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;month &lt; 7&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;month == 12 AND day == 24&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;month &gt; 6 AND hour &gt;= 8 AND hour &lt;= 20&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

</code></pre></div></div></div></div><p>This examples creates a partitioned "weather" table in a "mycontainer" data container.
The <code>option("partition", "year, month, day")</code> write option partitions the table by the <attr>year</attr>, <attr>month</attr>, and <attr>day</attr> item attributes.
As demonstrated in the following image, if you browse the container in the dashboard after running the example, you'll see that the <dirname>weather</dirname> directory has <path>year=&lt;value>/month=&lt;value>/day=&lt;value></path> partition directories that match the written items.
If you select any of the nested <dirname>day</dirname> partition directories, you can see the written items and their attributes.
For example, the first item (with attribute values <code>2016, 3, 25, 6, 16, 0.00, 55</code>) is saved to a <file>20163256</file> file in a <path>weather/year=2016/month=3/day=25</path> partition directory.<figure class=igz-figure id=img-dashboard_browse_partitioned_table><div><img src=../../../../../images/dashboard_browse_partitioned_table.png alt="Dashboard partition-table browse"></div></figure></p><p>Following is the output of the example's <cmd>show</cmd> commands for each read.
The filtered results are gathered by scanning only the partition directories that match the filter criteria.</p><p>Full table read</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+----+-----+---+----+-----------+-------+------------+----------+
<span class=p>|</span>year<span class=p>|</span>month<span class=p>|</span>day<span class=p>|</span>hour<span class=p>|</span>degrees_cel<span class=p>|</span>rain_ml<span class=p>|</span>humidity_per<span class=p>|</span>      time<span class=p>|</span>
+----+-----+---+----+-----------+-------+------------+----------+
<span class=p>|</span>2016<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>   9<span class=p>|</span>         10<span class=p>|</span>   0.05<span class=p>|</span>          47<span class=p>|</span> 201612249<span class=p>|</span>
<span class=p>|</span>2016<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>  19<span class=p>|</span>          8<span class=p>|</span>    0.2<span class=p>|</span>          47<span class=p>|</span>2016122419<span class=p>|</span>
<span class=p>|</span>2016<span class=p>|</span>    3<span class=p>|</span> 25<span class=p>|</span>   6<span class=p>|</span>         16<span class=p>|</span>    0.0<span class=p>|</span>          55<span class=p>|</span>  20163256<span class=p>|</span>
<span class=p>|</span>2016<span class=p>|</span>    3<span class=p>|</span> 25<span class=p>|</span>  17<span class=p>|</span>         19<span class=p>|</span>    0.1<span class=p>|</span>          62<span class=p>|</span> 201632517<span class=p>|</span>
<span class=p>|</span>2016<span class=p>|</span>    7<span class=p>|</span> 24<span class=p>|</span>   7<span class=p>|</span>         20<span class=p>|</span>    0.0<span class=p>|</span>          52<span class=p>|</span>  20167247<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>   11<span class=p>|</span>  1<span class=p>|</span>  22<span class=p>|</span>         13<span class=p>|</span>   0.01<span class=p>|</span>          41<span class=p>|</span> 201711122<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>   11<span class=p>|</span>  1<span class=p>|</span>  10<span class=p>|</span>         16<span class=p>|</span>    0.0<span class=p>|</span>          34<span class=p>|</span> 201711110<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>   12<span class=p>|</span> 12<span class=p>|</span>  16<span class=p>|</span>         12<span class=p>|</span>    0.0<span class=p>|</span>          47<span class=p>|</span>2017121216<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>  17<span class=p>|</span>         11<span class=p>|</span>    1.0<span class=p>|</span>          50<span class=p>|</span>2017122417<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>    5<span class=p>|</span>  7<span class=p>|</span>  14<span class=p>|</span>         21<span class=p>|</span>    0.0<span class=p>|</span>          70<span class=p>|</span>  20175714<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>    1<span class=p>|</span> 18<span class=p>|</span>   5<span class=p>|</span>          8<span class=p>|</span>    0.0<span class=p>|</span>          37<span class=p>|</span>  20181185<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>    1<span class=p>|</span> 18<span class=p>|</span>  17<span class=p>|</span>         10<span class=p>|</span>    2.0<span class=p>|</span>          45<span class=p>|</span> 201811817<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>   11<span class=p>|</span>  1<span class=p>|</span>  11<span class=p>|</span>         11<span class=p>|</span>   0.12<span class=p>|</span>          65<span class=p>|</span> 201811111<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>    5<span class=p>|</span> 20<span class=p>|</span>  15<span class=p>|</span>         24<span class=p>|</span>    0.0<span class=p>|</span>          62<span class=p>|</span> 201852015<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>    5<span class=p>|</span> 20<span class=p>|</span>  21<span class=p>|</span>         20<span class=p>|</span>    0.0<span class=p>|</span>          59<span class=p>|</span> 201852021<span class=p>|</span>
+----+-----+---+----+-----------+-------+------------+----------+
</code></pre></div><p><code>month &lt; 7</code> filter  retrieve all data for the first six months of each year:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+----+-----+---+----+-----------+-------+------------+---------+
<span class=p>|</span>year<span class=p>|</span>month<span class=p>|</span>day<span class=p>|</span>hour<span class=p>|</span>degrees_cel<span class=p>|</span>rain_ml<span class=p>|</span>humidity_per<span class=p>|</span>     time<span class=p>|</span>
+----+-----+---+----+-----------+-------+------------+---------+
<span class=p>|</span>2016<span class=p>|</span>    3<span class=p>|</span> 25<span class=p>|</span>   6<span class=p>|</span>         16<span class=p>|</span>    0.0<span class=p>|</span>          55<span class=p>|</span> 20163256<span class=p>|</span>
<span class=p>|</span>2016<span class=p>|</span>    3<span class=p>|</span> 25<span class=p>|</span>  17<span class=p>|</span>         19<span class=p>|</span>    0.1<span class=p>|</span>          62<span class=p>|</span>201632517<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>    5<span class=p>|</span>  7<span class=p>|</span>  14<span class=p>|</span>         21<span class=p>|</span>    0.0<span class=p>|</span>          70<span class=p>|</span> 20175714<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>    1<span class=p>|</span> 18<span class=p>|</span>   5<span class=p>|</span>          8<span class=p>|</span>    0.0<span class=p>|</span>          37<span class=p>|</span> 20181185<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>    1<span class=p>|</span> 18<span class=p>|</span>  17<span class=p>|</span>         10<span class=p>|</span>    2.0<span class=p>|</span>          45<span class=p>|</span>201811817<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>    5<span class=p>|</span> 20<span class=p>|</span>  15<span class=p>|</span>         24<span class=p>|</span>    0.0<span class=p>|</span>          62<span class=p>|</span>201852015<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>    5<span class=p>|</span> 20<span class=p>|</span>  21<span class=p>|</span>         20<span class=p>|</span>    0.0<span class=p>|</span>          59<span class=p>|</span>201852021<span class=p>|</span>
+----+-----+---+----+-----------+-------+------------+---------+
</code></pre></div><p><code>month == 12 AND day == 24</code> filter  retrieve all hours on Dec 24 each year:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>
+----+-----+---+----+-----------+-------+------------+----------+
<span class=p>|</span>year<span class=p>|</span>month<span class=p>|</span>day<span class=p>|</span>hour<span class=p>|</span>degrees_cel<span class=p>|</span>rain_ml<span class=p>|</span>humidity_per<span class=p>|</span>      time<span class=p>|</span>
+----+-----+---+----+-----------+-------+------------+----------+
<span class=p>|</span>2016<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>   9<span class=p>|</span>         10<span class=p>|</span>   0.05<span class=p>|</span>          47<span class=p>|</span> 201612249<span class=p>|</span>
<span class=p>|</span>2016<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>  19<span class=p>|</span>          8<span class=p>|</span>    0.2<span class=p>|</span>          47<span class=p>|</span>2016122419<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>  17<span class=p>|</span>         11<span class=p>|</span>    1.0<span class=p>|</span>          50<span class=p>|</span>2017122417<span class=p>|</span>
+----+-----+---+----+-----------+-------+------------+----------+
</code></pre></div><p><code>month > 6 AND hour >= 8 AND hour &lt;= 20</code> filter  retrieve 08:0020:00 data for every day in the last six months of each year:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+----+-----+---+----+-----------+-------+------------+----------+
<span class=p>|</span>year<span class=p>|</span>month<span class=p>|</span>day<span class=p>|</span>hour<span class=p>|</span>degrees_cel<span class=p>|</span>rain_ml<span class=p>|</span>humidity_per<span class=p>|</span>      time<span class=p>|</span>
+----+-----+---+----+-----------+-------+------------+----------+
<span class=p>|</span>2016<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>   9<span class=p>|</span>         10<span class=p>|</span>   0.05<span class=p>|</span>          47<span class=p>|</span> 201612249<span class=p>|</span>
<span class=p>|</span>2016<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>  19<span class=p>|</span>          8<span class=p>|</span>    0.2<span class=p>|</span>          47<span class=p>|</span>2016122419<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>   11<span class=p>|</span>  1<span class=p>|</span>  10<span class=p>|</span>         16<span class=p>|</span>    0.0<span class=p>|</span>          34<span class=p>|</span> 201711110<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>   12<span class=p>|</span> 12<span class=p>|</span>  16<span class=p>|</span>         12<span class=p>|</span>    0.0<span class=p>|</span>          47<span class=p>|</span>2017121216<span class=p>|</span>
<span class=p>|</span>2017<span class=p>|</span>   12<span class=p>|</span> 24<span class=p>|</span>  17<span class=p>|</span>         11<span class=p>|</span>    1.0<span class=p>|</span>          50<span class=p>|</span>2017122417<span class=p>|</span>
<span class=p>|</span>2018<span class=p>|</span>   11<span class=p>|</span>  1<span class=p>|</span>  11<span class=p>|</span>         11<span class=p>|</span>   0.12<span class=p>|</span>          65<span class=p>|</span> 201811111<span class=p>|</span>
+----+-----+---+----+-----------+-------+------------+----------+
</code></pre></div><h2 id=range-scans>Range Scans</h2><p>A NoSQL Spark DataFrame table query that uses supported sharding-key and optional sorting-key filters to retrieve items with the same sharding-key value, is processed by performing a range scan, which is more efficient than the standard full table scan.
See NoSQL <a href=../../../../../data-layer/nosql/#range-scans>Range Scans</a>.
Note that the support for Spark DataFrame range scans requires a table schema that was inferred with a <a href=#defining-the-table-schema>NoSQL Spark DataFrame</a>, <a href=../../../../../data-layer/reference/frames/nosql/overview/#table-schema>Frames</a>, or the <a href=../../../../../data-layer/presto/presto-cli/#nosql-table-schema>Iguazio Presto connector</a>.</p><div class="admonition note" id=range-scan-operators><div class=admonition-title>Range-Scan Operators</div><div class=admonition-content>The NoSQL Spark DataFrame uses range scan for compound primary-key table queries that apply the equal-to (<code>=</code>) or IN (<code>IN</code>/<func>isin</func>) operator to the sharding-key attribute, and optionally also apply a comparison operator (<code>=</code>/<code>></code>/<code>>=</code>/<code>&lt;</code>/<code>&lt;=</code>) to the sorting-key attribute.</div></div><h3 id=range-scan-examples>Range-Scan Examples</h3><h4 id=range-scan-example-basic>Example 1  Basic Range Scan</h4><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>

<span class=k>val</span> <span class=n>spark</span> <span class=k>=</span> <span class=nc>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=o>(</span><span class=s>&#34;Range-Scan Example&#34;</span><span class=o>).</span><span class=n>getOrCreate</span><span class=o>()</span>
<span class=k>val</span> <span class=n>table_path</span> <span class=k>=</span> <span class=s>&#34;v3io://mycontainer/mytaxis/rides/&#34;</span>

<span class=k>var</span> <span class=n>writeDF</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>(</span>
    <span class=o>(</span><span class=mi>24</span><span class=o>,</span> <span class=s>&#34;20180601&#34;</span><span class=o>,</span>  <span class=mi>8</span><span class=o>,</span> <span class=mf>332.0</span><span class=o>,</span> <span class=mi>18</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>24</span><span class=o>,</span> <span class=s>&#34;20180602&#34;</span><span class=o>,</span>  <span class=mi>5</span><span class=o>,</span> <span class=mf>260.0</span><span class=o>,</span> <span class=mi>11</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>24</span><span class=o>,</span> <span class=s>&#34;20180701&#34;</span><span class=o>,</span>  <span class=mi>7</span><span class=o>,</span> <span class=mf>352.1</span><span class=o>,</span> <span class=mi>21</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180601&#34;</span><span class=o>,</span> <span class=mi>25</span><span class=o>,</span> <span class=mf>125.0</span><span class=o>,</span> <span class=mi>40</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180602&#34;</span><span class=o>,</span> <span class=mi>20</span><span class=o>,</span> <span class=mf>106.0</span><span class=o>,</span> <span class=mi>46</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180701&#34;</span><span class=o>,</span> <span class=mi>28</span><span class=o>,</span> <span class=mf>106.4</span><span class=o>,</span> <span class=mi>42</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>16</span><span class=o>,</span> <span class=s>&#34;20180601&#34;</span><span class=o>,</span>  <span class=mi>1</span><span class=o>,</span> <span class=mf>224.2</span><span class=o>,</span>  <span class=mi>8</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>16</span><span class=o>,</span> <span class=s>&#34;20180602&#34;</span><span class=o>,</span> <span class=mi>10</span><span class=o>,</span> <span class=mf>244.0</span><span class=o>,</span> <span class=mi>45</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>16</span><span class=o>,</span> <span class=s>&#34;20180701&#34;</span><span class=o>,</span>  <span class=mi>6</span><span class=o>,</span> <span class=mf>193.2</span><span class=o>,</span> <span class=mi>24</span><span class=o>)</span>
<span class=o>).</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;driver_id&#34;</span><span class=o>,</span> <span class=s>&#34;date&#34;</span><span class=o>,</span> <span class=s>&#34;num_rides&#34;</span><span class=o>,</span> <span class=s>&#34;total_km&#34;</span><span class=o>,</span> <span class=s>&#34;total_passengers&#34;</span><span class=o>)</span>
<span class=n>writeDF</span> <span class=k>=</span> <span class=n>writeDF</span>
    <span class=o>.</span><span class=n>withColumn</span><span class=o>(</span><span class=s>&#34;avg_ride_km&#34;</span><span class=o>,</span> <span class=n>$</span><span class=s>&#34;total_km&#34;</span> <span class=o>/</span> <span class=n>$</span><span class=s>&#34;num_rides&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>withColumn</span><span class=o>(</span><span class=s>&#34;avg_ride_passengers&#34;</span><span class=o>,</span> <span class=n>$</span><span class=s>&#34;total_passengers&#34;</span> <span class=o>/</span> <span class=n>$</span><span class=s>&#34;num_rides&#34;</span><span class=o>)</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;overwrite&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;driver_id&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;sorting-key&#34;</span><span class=o>,</span> <span class=s>&#34;date&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>

<span class=c1>// Range-scan queries
</span><span class=c1></span><span class=k>var</span> <span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;driver_id&#34;</span> <span class=o>===</span> <span class=mi>1</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;driver_id&#34;</span> <span class=o>===</span> <span class=mi>24</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;date&#34;</span> <span class=o>&gt;=</span> <span class=s>&#34;20180101&#34;</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;date&#34;</span> <span class=o>&lt;</span> <span class=s>&#34;20180701&#34;</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;driver_id&#34;</span><span class=o>.</span><span class=n>isin</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span> <span class=mi>16</span><span class=o>,</span> <span class=mi>24</span><span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;avg_ride_passengers&#34;</span> <span class=o>&gt;=</span> <span class=mi>3</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>
<span class=o>}</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>

<span class=n>spark</span> <span class=o>=</span> <span class=n>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=p>(</span><span class=s2>&#34;Range-Scan Example&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>getOrCreate</span><span class=p>()</span>
<span class=n>table_path</span> <span class=o>=</span> <span class=s2>&#34;v3io://mycontainer/mytaxis/rides/&#34;</span>

<span class=n>writeDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=mi>24</span><span class=p>,</span> <span class=s2>&#34;20180601&#34;</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span> <span class=mf>332.0</span><span class=p>,</span> <span class=mi>18</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>24</span><span class=p>,</span> <span class=s2>&#34;20180602&#34;</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span> <span class=mf>260.0</span><span class=p>,</span> <span class=mi>11</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>24</span><span class=p>,</span> <span class=s2>&#34;20180701&#34;</span><span class=p>,</span>  <span class=mi>7</span><span class=p>,</span> <span class=mf>352.1</span><span class=p>,</span> <span class=mi>21</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180601&#34;</span><span class=p>,</span> <span class=mi>25</span><span class=p>,</span> <span class=mf>125.0</span><span class=p>,</span> <span class=mi>40</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180602&#34;</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mf>106.0</span><span class=p>,</span> <span class=mi>46</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180701&#34;</span><span class=p>,</span> <span class=mi>28</span><span class=p>,</span> <span class=mf>106.4</span><span class=p>,</span> <span class=mi>42</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>16</span><span class=p>,</span> <span class=s2>&#34;20180601&#34;</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span> <span class=mf>224.2</span><span class=p>,</span>  <span class=mi>8</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>16</span><span class=p>,</span> <span class=s2>&#34;20180602&#34;</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mf>244.0</span><span class=p>,</span> <span class=mi>45</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>16</span><span class=p>,</span> <span class=s2>&#34;20180701&#34;</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span> <span class=mf>193.2</span><span class=p>,</span> <span class=mi>24</span><span class=p>)</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;driver_id&#34;</span><span class=p>,</span> <span class=s2>&#34;date&#34;</span><span class=p>,</span> <span class=s2>&#34;num_rides&#34;</span><span class=p>,</span> <span class=s2>&#34;total_km&#34;</span><span class=p>,</span> <span class=s2>&#34;total_passengers&#34;</span><span class=p>])</span>
<span class=n>writeDF</span> <span class=o>=</span> <span class=n>writeDF</span><span class=o>.</span><span class=n>withColumn</span><span class=p>(</span>
    <span class=s2>&#34;avg_ride_km&#34;</span><span class=p>,</span> <span class=n>writeDF</span><span class=p>[</span><span class=s2>&#34;total_km&#34;</span><span class=p>]</span> <span class=o>/</span> <span class=n>writeDF</span><span class=p>[</span><span class=s2>&#34;num_rides&#34;</span><span class=p>])</span> \
                 <span class=o>.</span><span class=n>withColumn</span><span class=p>(</span>
    <span class=s2>&#34;avg_ride_passengers&#34;</span><span class=p>,</span> <span class=n>writeDF</span><span class=p>[</span><span class=s2>&#34;total_passengers&#34;</span><span class=p>]</span> <span class=o>/</span> <span class=n>writeDF</span><span class=p>[</span><span class=s2>&#34;num_rides&#34;</span><span class=p>])</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;overwrite&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;driver_id&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;sorting-key&#34;</span><span class=p>,</span> <span class=s2>&#34;date&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span>

<span class=c1># Range-scan queries</span>
<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;driver_id == 1&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;driver_id == 24 AND date &gt;= &#39;20180101&#39; AND date &lt; &#39;20180701&#39;&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;driver_id IN (1, 16, 24) AND avg_ride_passengers &gt;= 3&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

</code></pre></div></div></div></div><p>This example creates a "rides" table in a <dirname>mytaxis</dirname> directory in a "mycontainer" data container.
The <code>option("key", "driver_id")</code> and <code>option("sorting-key", "date")</code> write options define the <attr>driver_id</attr> attribute as the table's sharding key and the <attr>date</attr> attribute as the table's sorting key; all items in the DataFrame define these attributes.
If you browse the container in the dashboard after running the example, you'll see that the names of the files in the <path>mytaxis/rides</path> directory are of the format <code>&lt;sharding-key value>.&lt;sorting-key value></code>, as demonstrated in the following image (for example, <code>16.20180602</code>):<figure class=igz-figure id=img-dashboard_browse_range_scan_table><div><img src=../../../../../images/dashboard_browse_range_scan_table.png alt="Dashboard basic range-scan table browse"></div></figure></p><p>All of the <cmd>read</cmd> commands will result in faster <a href=#range-scans>range scans</a>, compared to standard full-table scans, because they include range-scan sharding-key and optionally also sorting-key filters.
Following is the output of the example's <cmd>show</cmd> commands for each read:</p><p><code>"driver_id == 1"</code> filter  retrieve all items with a <attr>driver_id</attr> sharding-key attribute value of <code>1</code> (regardless of the sorting-key value):</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+---------+--------+---------+--------+----------------+------------------+-------------------+
<span class=p>|</span>driver_id<span class=p>|</span>    date<span class=p>|</span>num_rides<span class=p>|</span>total_km<span class=p>|</span>total_passengers<span class=p>|</span>       avg_ride_km<span class=p>|</span>avg_ride_passengers<span class=p>|</span>
+---------+--------+---------+--------+----------------+------------------+-------------------+
<span class=p>|</span>        1<span class=p>|</span>20180601<span class=p>|</span>       25<span class=p>|</span>   125.0<span class=p>|</span>              40<span class=p>|</span>               5.0<span class=p>|</span>                1.6<span class=p>|</span>
<span class=p>|</span>        1<span class=p>|</span>20180602<span class=p>|</span>       20<span class=p>|</span>   106.0<span class=p>|</span>              46<span class=p>|</span>               5.3<span class=p>|</span>                2.3<span class=p>|</span>
<span class=p>|</span>        1<span class=p>|</span>20180701<span class=p>|</span>       28<span class=p>|</span>   106.4<span class=p>|</span>              42<span class=p>|</span>3.8000000000000003<span class=p>|</span>                1.5<span class=p>|</span>
+---------+--------+---------+--------+----------------+------------------+-------------------+
</code></pre></div><p><code>"driver_id == 24 AND date >= '20180101' AND date &lt; '20180701'"</code> filter  retrieve all items with a <attr>driver_id</attr> sharding-key attribute value of <code>24</code> and a <attr>date</attr> sorting-key attribute value within the first six months of 2018:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+---------+--------+---------+--------+----------------+-----------+-------------------+
<span class=p>|</span>driver_id<span class=p>|</span>    date<span class=p>|</span>num_rides<span class=p>|</span>total_km<span class=p>|</span>total_passengers<span class=p>|</span>avg_ride_km<span class=p>|</span>avg_ride_passengers<span class=p>|</span>
+---------+--------+---------+--------+----------------+-----------+-------------------+
<span class=p>|</span>       24<span class=p>|</span>20180601<span class=p>|</span>        8<span class=p>|</span>   332.0<span class=p>|</span>              18<span class=p>|</span>       41.5<span class=p>|</span>               2.25<span class=p>|</span>
<span class=p>|</span>       24<span class=p>|</span>20180602<span class=p>|</span>        5<span class=p>|</span>   260.0<span class=p>|</span>              11<span class=p>|</span>       52.0<span class=p>|</span>                2.2<span class=p>|</span>
+---------+--------+---------+--------+----------------+-----------+-------------------+
</code></pre></div><p><code>"driver_id IN (1, 16, 24) AND avg_ride_passengers >= 3"</code> filter  retrieve all items with a <attr>driver_id</attr> sharding-key attribute value of <code>1</code>, <code>16</code>, or <code>24</code> (regardless of the sorting-key value) and an <attr>avg_ride_passengers</attr> attribute value that is greater or equal to 3:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+---------+--------+---------+--------+----------------+------------------+-------------------+
<span class=p>|</span>driver_id<span class=p>|</span>    date<span class=p>|</span>num_rides<span class=p>|</span>total_km<span class=p>|</span>total_passengers<span class=p>|</span>       avg_ride_km<span class=p>|</span>avg_ride_passengers<span class=p>|</span>
+---------+--------+---------+--------+----------------+------------------+-------------------+
<span class=p>|</span>       16<span class=p>|</span>20180601<span class=p>|</span>        1<span class=p>|</span>   224.2<span class=p>|</span>               8<span class=p>|</span>             224.2<span class=p>|</span>                8.0<span class=p>|</span>
<span class=p>|</span>       16<span class=p>|</span>20180602<span class=p>|</span>       10<span class=p>|</span>   244.0<span class=p>|</span>              45<span class=p>|</span>              24.4<span class=p>|</span>                4.5<span class=p>|</span>
<span class=p>|</span>       16<span class=p>|</span>20180701<span class=p>|</span>        6<span class=p>|</span>   193.2<span class=p>|</span>              24<span class=p>|</span>32.199999999999996<span class=p>|</span>                4.0<span class=p>|</span>
<span class=p>|</span>       24<span class=p>|</span>20180701<span class=p>|</span>        7<span class=p>|</span>   352.1<span class=p>|</span>              21<span class=p>|</span>50.300000000000004<span class=p>|</span>                3.0<span class=p>|</span>
+---------+--------+---------+--------+----------------+------------------+-------------------+
</code></pre></div><h4 id=range-scan-example-even-distribution>Example 2  Even-Distribution Range Scan</h4><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>

<span class=k>val</span> <span class=n>spark</span> <span class=k>=</span> <span class=nc>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=o>(</span><span class=s>&#34;Even-Distribution Range-Scan Example&#34;</span><span class=o>).</span><span class=n>getOrCreate</span><span class=o>()</span>
<span class=k>val</span> <span class=n>table_path</span> <span class=k>=</span> <span class=s>&#34;v3io://mycontainer/mytaxis/even_distribution_range_scan/rides/&#34;</span>

<span class=k>var</span> <span class=n>writeDF</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>(</span>
    <span class=o>(</span><span class=mi>24</span><span class=o>,</span> <span class=s>&#34;20180601&#34;</span><span class=o>,</span>  <span class=mi>8</span><span class=o>,</span> <span class=mf>332.0</span><span class=o>,</span> <span class=mi>18</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>24</span><span class=o>,</span> <span class=s>&#34;20180602&#34;</span><span class=o>,</span>  <span class=mi>5</span><span class=o>,</span> <span class=mf>260.0</span><span class=o>,</span> <span class=mi>11</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>24</span><span class=o>,</span> <span class=s>&#34;20180701&#34;</span><span class=o>,</span>  <span class=mi>7</span><span class=o>,</span> <span class=mf>352.1</span><span class=o>,</span> <span class=mi>21</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180101&#34;</span><span class=o>,</span>  <span class=mi>4</span><span class=o>,</span>  <span class=mf>90.0</span><span class=o>,</span> <span class=mi>14</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180102&#34;</span><span class=o>,</span> <span class=mi>14</span><span class=o>,</span> <span class=mf>141.4</span><span class=o>,</span> <span class=mi>28</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180202&#34;</span><span class=o>,</span>  <span class=mi>8</span><span class=o>,</span> <span class=mf>220.8</span><span class=o>,</span> <span class=mi>22</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180601&#34;</span><span class=o>,</span> <span class=mi>25</span><span class=o>,</span> <span class=mf>125.0</span><span class=o>,</span> <span class=mi>40</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180602&#34;</span><span class=o>,</span> <span class=mi>20</span><span class=o>,</span> <span class=mf>106.0</span><span class=o>,</span> <span class=mi>46</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>1</span><span class=o>,</span>  <span class=s>&#34;20180701&#34;</span><span class=o>,</span> <span class=mi>28</span><span class=o>,</span> <span class=mf>106.4</span><span class=o>,</span> <span class=mi>42</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>16</span><span class=o>,</span> <span class=s>&#34;20180601&#34;</span><span class=o>,</span>  <span class=mi>1</span><span class=o>,</span> <span class=mf>224.2</span><span class=o>,</span>  <span class=mi>8</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>16</span><span class=o>,</span> <span class=s>&#34;20180602&#34;</span><span class=o>,</span> <span class=mi>10</span><span class=o>,</span> <span class=mf>244.0</span><span class=o>,</span> <span class=mi>45</span><span class=o>),</span>
    <span class=o>(</span><span class=mi>16</span><span class=o>,</span> <span class=s>&#34;20180701&#34;</span><span class=o>,</span>  <span class=mi>6</span><span class=o>,</span> <span class=mf>193.2</span><span class=o>,</span> <span class=mi>24</span><span class=o>)</span>
<span class=o>).</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;driver_id&#34;</span><span class=o>,</span> <span class=s>&#34;date&#34;</span><span class=o>,</span> <span class=s>&#34;num_rides&#34;</span><span class=o>,</span> <span class=s>&#34;total_km&#34;</span><span class=o>,</span> <span class=s>&#34;total_passengers&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>withColumn</span><span class=o>(</span><span class=s>&#34;avg_ride_km&#34;</span><span class=o>,</span> <span class=n>$</span><span class=s>&#34;total_km&#34;</span> <span class=o>/</span> <span class=n>$</span><span class=s>&#34;num_rides&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>withColumn</span><span class=o>(</span><span class=s>&#34;avg_ride_passengers&#34;</span><span class=o>,</span> <span class=n>$</span><span class=s>&#34;total_passengers&#34;</span> <span class=o>/</span> <span class=n>$</span><span class=s>&#34;num_rides&#34;</span><span class=o>)</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;overwrite&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;driver_id&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;sorting-key&#34;</span><span class=o>,</span> <span class=s>&#34;date&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;range-scan.even-distribution&#34;</span><span class=o>,</span> <span class=s>&#34;true&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>

<span class=c1>// Range-scan queries
</span><span class=c1></span><span class=k>var</span> <span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;driver_id&#34;</span> <span class=o>===</span> <span class=mi>1</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;driver_id&#34;</span> <span class=o>===</span> <span class=mi>24</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;date&#34;</span> <span class=o>&gt;=</span> <span class=s>&#34;20180101&#34;</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;date&#34;</span> <span class=o>&lt;</span> <span class=s>&#34;20180701&#34;</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>).</span><span class=n>load</span><span class=o>(</span><span class=n>table_path</span><span class=o>)</span>
    <span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;driver_id&#34;</span><span class=o>.</span><span class=n>isin</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span> <span class=mi>16</span><span class=o>,</span> <span class=mi>24</span><span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=n>$</span><span class=s>&#34;avg_ride_passengers&#34;</span> <span class=o>&gt;=</span> <span class=mi>3</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>

<span class=n>spark</span> <span class=o>=</span> <span class=n>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=p>(</span><span class=s2>&#34;Even-Distribution Range-Scan Example&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>getOrCreate</span><span class=p>()</span>
<span class=n>table_path</span> <span class=o>=</span> <span class=s2>&#34;v3io://mycontainer/mytaxis/even_distribution_range_scan/rides/&#34;</span>

<span class=n>writeDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=mi>24</span><span class=p>,</span> <span class=s2>&#34;20180601&#34;</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span> <span class=mf>332.0</span><span class=p>,</span> <span class=mi>18</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>24</span><span class=p>,</span> <span class=s2>&#34;20180602&#34;</span><span class=p>,</span>  <span class=mi>5</span><span class=p>,</span> <span class=mf>260.0</span><span class=p>,</span> <span class=mi>11</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>24</span><span class=p>,</span> <span class=s2>&#34;20180701&#34;</span><span class=p>,</span>  <span class=mi>7</span><span class=p>,</span> <span class=mf>352.1</span><span class=p>,</span> <span class=mi>21</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180101&#34;</span><span class=p>,</span>  <span class=mi>4</span><span class=p>,</span>  <span class=mf>90.0</span><span class=p>,</span> <span class=mi>14</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180102&#34;</span><span class=p>,</span> <span class=mi>14</span><span class=p>,</span> <span class=mf>141.4</span><span class=p>,</span> <span class=mi>28</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180202&#34;</span><span class=p>,</span>  <span class=mi>8</span><span class=p>,</span> <span class=mf>220.8</span><span class=p>,</span> <span class=mi>22</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180601&#34;</span><span class=p>,</span> <span class=mi>25</span><span class=p>,</span> <span class=mf>125.0</span><span class=p>,</span> <span class=mi>40</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180602&#34;</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mf>106.0</span><span class=p>,</span> <span class=mi>46</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span>  <span class=s2>&#34;20180701&#34;</span><span class=p>,</span> <span class=mi>28</span><span class=p>,</span> <span class=mf>106.4</span><span class=p>,</span> <span class=mi>42</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>16</span><span class=p>,</span> <span class=s2>&#34;20180601&#34;</span><span class=p>,</span>  <span class=mi>1</span><span class=p>,</span> <span class=mf>224.2</span><span class=p>,</span>  <span class=mi>8</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>16</span><span class=p>,</span> <span class=s2>&#34;20180602&#34;</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mf>244.0</span><span class=p>,</span> <span class=mi>45</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>16</span><span class=p>,</span> <span class=s2>&#34;20180701&#34;</span><span class=p>,</span>  <span class=mi>6</span><span class=p>,</span> <span class=mf>193.2</span><span class=p>,</span> <span class=mi>24</span><span class=p>)</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;driver_id&#34;</span><span class=p>,</span> <span class=s2>&#34;date&#34;</span><span class=p>,</span> <span class=s2>&#34;num_rides&#34;</span><span class=p>,</span> <span class=s2>&#34;total_km&#34;</span><span class=p>,</span> <span class=s2>&#34;total_passengers&#34;</span><span class=p>])</span>
<span class=n>writeDF</span> <span class=o>=</span> <span class=n>writeDF</span><span class=o>.</span><span class=n>withColumn</span><span class=p>(</span>
    <span class=s2>&#34;avg_ride_km&#34;</span><span class=p>,</span> <span class=n>writeDF</span><span class=p>[</span><span class=s2>&#34;total_km&#34;</span><span class=p>]</span> <span class=o>/</span> <span class=n>writeDF</span><span class=p>[</span><span class=s2>&#34;num_rides&#34;</span><span class=p>])</span> \
                 <span class=o>.</span><span class=n>withColumn</span><span class=p>(</span>
    <span class=s2>&#34;avg_ride_passengers&#34;</span><span class=p>,</span> <span class=n>writeDF</span><span class=p>[</span><span class=s2>&#34;total_passengers&#34;</span><span class=p>]</span> <span class=o>/</span> <span class=n>writeDF</span><span class=p>[</span><span class=s2>&#34;num_rides&#34;</span><span class=p>])</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;overwrite&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;driver_id&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;sorting-key&#34;</span><span class=p>,</span> <span class=s2>&#34;date&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;range-scan.even-distribution&#34;</span><span class=p>,</span> <span class=s2>&#34;true&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span>

<span class=c1># Range-scan queries</span>
<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;driver_id == 1&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;driver_id == 24 AND date &gt;= &#39;20180101&#39; AND date &lt; &#39;20180701&#39;&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>table_path</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&#34;driver_id IN (1, 16, 24) AND avg_ride_passengers &gt;= 3&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

</code></pre></div></div></div></div><p>This example creates a "rides" table in a <path>mytaxis/even_distribution_range_scan</path> directory in a "mycontainer" data container.
The content of the table is similar to that of the "rides" table in the <a href=#range-scan-example-basic>basic range-scan example</a> but with additional items with a sharding-key value of 1.
For demonstration purposes, the assumption is that the data in the table is expected to become less uniform as more items are added, with most items having the same sharding-key value (for example, 1).
Therefore, the <opt>range-scan-even-distribution</opt> write option is added to the <code>writeDF</code> write command  <code>option("range-scan.even-distribution", "true")</code>  to recalculate the items' sharding-key values and distribute the items more evenly across multiple data slices.
See <a href=#even-workload-distribution>Even Workload Distribution</a>.</p><p>The read queries remain the same as in the basic range-scan example.
However, if you browse the container in the dashboard after running the example, you'll see that the names of the files in the <path>mytaxis/even_distribution_range_scan/rides</path> directory are of the format <code>&lt;original sharding-key value>_&lt;n>.&lt;sorting-key value></code>, as demonstrated in the following image, and not <code>&lt;original sharding-key value>.&lt;sorting-key value></code> as in the basic example (for example, <code>16_36.20180602</code> instead of <code>16.20180602</code>):<figure class=igz-figure id=img-dashboard_browse_range_scan_even_distribution_table.zoom_out.all_items_no_schema><div><img src=../../../../../images/dashboard_browse_range_scan_even_distribution_table.zoom_out.all_items_no_schema.png alt="Dashboard range-scan even-distribution table browse"></div></figure></p><p>Following is the output of the example's <cmd>show</cmd> commands for each read.
If you compare the output to that of the basic range-scan example, you'll see that it's similar except that the even-distribution range-scan query results have some additional results for sharding-key 1 items that aren't found in the basic-example table and the sort order is different.</p><p><code>"driver_id == 1"</code> filter  retrieve all items with a <attr>driver_id</attr> sharding-key attribute value of <code>1</code> (regardless of the sorting-key value):</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+---------+--------+---------+--------+----------------+------------------+-------------------+
<span class=p>|</span>driver_id<span class=p>|</span>    date<span class=p>|</span>num_rides<span class=p>|</span>total_km<span class=p>|</span>total_passengers<span class=p>|</span>       avg_ride_km<span class=p>|</span>avg_ride_passengers<span class=p>|</span>
+---------+--------+---------+--------+----------------+------------------+-------------------+
<span class=p>|</span>        1<span class=p>|</span>20180202<span class=p>|</span>        8<span class=p>|</span>   220.8<span class=p>|</span>              22<span class=p>|</span>              27.6<span class=p>|</span>               2.75<span class=p>|</span>
<span class=p>|</span>        1<span class=p>|</span>20180102<span class=p>|</span>       14<span class=p>|</span>   141.4<span class=p>|</span>              28<span class=p>|</span>              10.1<span class=p>|</span>                2.0<span class=p>|</span>
<span class=p>|</span>        1<span class=p>|</span>20180101<span class=p>|</span>        4<span class=p>|</span>    90.0<span class=p>|</span>              14<span class=p>|</span>              22.5<span class=p>|</span>                3.5<span class=p>|</span>
<span class=p>|</span>        1<span class=p>|</span>20180602<span class=p>|</span>       20<span class=p>|</span>   106.0<span class=p>|</span>              46<span class=p>|</span>               5.3<span class=p>|</span>                2.3<span class=p>|</span>
<span class=p>|</span>        1<span class=p>|</span>20180701<span class=p>|</span>       28<span class=p>|</span>   106.4<span class=p>|</span>              42<span class=p>|</span>3.8000000000000003<span class=p>|</span>                1.5<span class=p>|</span>
<span class=p>|</span>        1<span class=p>|</span>20180601<span class=p>|</span>       25<span class=p>|</span>   125.0<span class=p>|</span>              40<span class=p>|</span>               5.0<span class=p>|</span>                1.6<span class=p>|</span>
+---------+--------+---------+--------+----------------+------------------+-------------------+
</code></pre></div><p><code>"driver_id == 24 AND date >= '20180101' AND date &lt; '20180701'"</code> filter  retrieve all items with a <attr>driver_id</attr> sharding-key attribute value of <code>24</code> and a <attr>date</attr> sorting-key attribute value within the first six months of 2018:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+---------+--------+---------+--------+----------------+-----------+-------------------+
<span class=p>|</span>driver_id<span class=p>|</span>    date<span class=p>|</span>num_rides<span class=p>|</span>total_km<span class=p>|</span>total_passengers<span class=p>|</span>avg_ride_km<span class=p>|</span>avg_ride_passengers<span class=p>|</span>
+---------+--------+---------+--------+----------------+-----------+-------------------+
<span class=p>|</span>       24<span class=p>|</span>20180601<span class=p>|</span>        8<span class=p>|</span>   332.0<span class=p>|</span>              18<span class=p>|</span>       41.5<span class=p>|</span>               2.25<span class=p>|</span>
<span class=p>|</span>       24<span class=p>|</span>20180602<span class=p>|</span>        5<span class=p>|</span>   260.0<span class=p>|</span>              11<span class=p>|</span>       52.0<span class=p>|</span>                2.2<span class=p>|</span>
+---------+--------+---------+--------+----------------+-----------+-------------------+
</code></pre></div><p><code>"driver_id IN (1, 16, 24) AND avg_ride_passengers >= 3"</code> filter  retrieve all items with a <attr>driver_id</attr> sharding-key attribute value of <code>1</code>, <code>16</code>, or <code>24</code> (regardless of the sorting-key value) and an <attr>avg_ride_passengers</attr> attribute value that is greater or equal to 3:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+---------+--------+---------+--------+----------------+------------------+-------------------+
<span class=p>|</span>driver_id<span class=p>|</span>    date<span class=p>|</span>num_rides<span class=p>|</span>total_km<span class=p>|</span>total_passengers<span class=p>|</span>       avg_ride_km<span class=p>|</span>avg_ride_passengers<span class=p>|</span>
+---------+--------+---------+--------+----------------+------------------+-------------------+
<span class=p>|</span>        1<span class=p>|</span>20180101<span class=p>|</span>        4<span class=p>|</span>    90.0<span class=p>|</span>              14<span class=p>|</span>              22.5<span class=p>|</span>                3.5<span class=p>|</span>
<span class=p>|</span>       16<span class=p>|</span>20180602<span class=p>|</span>       10<span class=p>|</span>   244.0<span class=p>|</span>              45<span class=p>|</span>              24.4<span class=p>|</span>                4.5<span class=p>|</span>
<span class=p>|</span>       16<span class=p>|</span>20180701<span class=p>|</span>        6<span class=p>|</span>   193.2<span class=p>|</span>              24<span class=p>|</span>32.199999999999996<span class=p>|</span>                4.0<span class=p>|</span>
<span class=p>|</span>       16<span class=p>|</span>20180601<span class=p>|</span>        1<span class=p>|</span>   224.2<span class=p>|</span>               8<span class=p>|</span>             224.2<span class=p>|</span>                8.0<span class=p>|</span>
<span class=p>|</span>       24<span class=p>|</span>20180701<span class=p>|</span>        7<span class=p>|</span>   352.1<span class=p>|</span>              21<span class=p>|</span>50.300000000000004<span class=p>|</span>                3.0<span class=p>|</span>
+---------+--------+---------+--------+----------------+------------------+-------------------+
</code></pre></div><h2 id=even-workload-distribution>Even Workload Distribution</h2><p>The NoSQL Spark DataFrame offers custom support for even distribution of ingested items across the available data slices for the parent container.
The objective is to improve the system's performance when working with a non-uniform data set  see the <a href=../../../../../data-layer/objects/object-names-and-keys/best-practices-primary-keys-n-workload-distribution/#sharding-key-values-recalculation-for-even-workload-distribution>Recalculating Sharding-Key Values for Even Workload Distribution</a> best-practice guidelines.</p><p>When writing (ingesting) data to a table with a compound <code>&lt;sharding key>.&lt;sorting key></code> primary key (see the <a href=#option-key><opt>key</opt></a> and <a href=#option-sorting-key><opt>sorting-key</opt></a> write options), you can optionally also set the custom <a href=#option-range-scan-even-distribution><opt>range-scan-even-distribution</opt></a> option.
This option instructs the platform to recalculate the primary-key value for each of the ingested items, by splitting the item's original sharding-key value into multiple values, according to the number configured in the platform's <api>v3io.kv.range-scan.hashing-bucket-num</api> configuration property (default = 64).
As a result, items with the same original sharding-key value (which remains stored in the items' sharding-key attribute) are distributed across multiple data slices, based on the value of the items' sorting key, instead of being stored on the same slice.
This is done implicitly, although if you browse the table directory you can see the new primary-key values (item names)  of the format <code>&lt;original sharding-key value>_&lt;n>.&lt;sorting-key value></code> (for example, <code>johnd_1.20180602</code>)  as demonstrated in the <a href=#range-scan-example-even-distribution>even-distribution range-scan example</a>.</p><p>When submitting a NoSQL Spark DataFrame or Presto sharding-key query for a table that was created with the even-distribution Spark DataFrame option or by using similar calculations, use the original sharding-key value.
Behind the scenes, the platform searches for all the primary-key values that were derived from the original sharding-key value.
Note that this custom support requires a table schema that was inferred with a <a href=#defining-the-table-schema>NoSQL Spark DataFrame</a> or with the <a href=../../../../../data-layer/presto/presto-cli/#nosql-table-schema>Iguazio Presto connector</a>.</p><p>For more information on the behind-the-scenes implementation to support this feature, see the <a href=../../../../../data-layer/objects/object-names-and-keys/best-practices-primary-keys-n-workload-distribution/#nosql-spark-df-even-distribution>Using a NoSQL Spark DataFrame for Even Workload Distribution</a> best-practices documentation.</p><h2 id=examples>Examples</h2><p>Following are some examples of using the NoSQL Spark DataFrame.
For schema-definition, table-partitioning, and range-scan examples, see the <a href=#defining-the-table-schema>Defining the Table Schema</a>, <a href=#table-partitioning-examples>Partitioned Tables</a>, and <a href=#range-scan-examples>Range Scans</a> sections, respectively; the range-scan examples also demonstrate the support for <a href=#range-scan-example-even-distribution>even workload distribution</a>.
For additional examples, see <a href=../../../../../data-layer/spark-data-ingestion-qs/>Getting Started with Data Ingestion Using Spark</a>.</p><h3 id=read-examples>Read Examples</h3><div class="admonition note" id=read-examples-notes><div class=admonition-title>Note</div><div class=admonition-content><ul><li>For a NoSQL DataFrame read example with an explicit table-schema definition, see the <a href=#programmatic-table-schema-definition-examples>examples</a> in the <a href=#defining-the-table-schema-programmatically>Defining the Table Schema Programmatically</a> section.</li><li>The <a href=#write-example-condition>conditional-update write example</a> also demonstrates reading from a NoSQL table to validate the execution of the write commands.</li></ul></div></div><h4 id=read-example-basic-n-related-queries>Example 1  Basic Read and Related Queries</h4><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>

<span class=k>val</span> <span class=n>spark</span> <span class=k>=</span> <span class=nc>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=o>(</span><span class=s>&#34;My Spark Application&#34;</span><span class=o>).</span><span class=n>getOrCreate</span><span class=o>()</span>

<span class=k>val</span> <span class=n>df</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;inferSchema&#34;</span><span class=o>,</span> <span class=s>&#34;true&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>load</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/WebData&#34;</span><span class=o>)</span>

<span class=n>df</span><span class=o>.</span><span class=n>select</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;url&#34;</span><span class=o>,</span> <span class=n>$</span><span class=s>&#34;pages&#34;</span> <span class=o>+</span> <span class=n>$</span><span class=s>&#34;ads&#34;</span> <span class=n>as</span> <span class=s>&#34;views&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>where</span><span class=o>(</span><span class=n>$</span><span class=s>&#34;browser&#34;</span> <span class=o>!=</span> <span class=n>lit</span><span class=o>(</span><span class=s>&#34;Chrome&#34;</span><span class=o>))</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>

<span class=n>spark</span> <span class=o>=</span> <span class=n>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>getOrCreate</span><span class=p>()</span>

<span class=n>val</span> <span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;inferSchema&#34;</span><span class=p>,</span> <span class=s2>&#34;true&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/WebData&#34;</span><span class=p>)</span>

<span class=n>df</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s2>&#34;url&#34;</span><span class=p>],</span> <span class=n>df</span><span class=p>[</span><span class=s2>&#34;pages&#34;</span><span class=p>]</span> <span class=o>+</span> <span class=n>df</span><span class=p>[</span><span class=s2>&#34;ads&#34;</span><span class=p>]</span> <span class=k>as</span> <span class=s2>&#34;views&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s2>&#34;browser&#34;</span><span class=p>]</span> <span class=o>!=</span> <span class=n>lit</span><span class=p>(</span><span class=s2>&#34;Chrome&#34;</span><span class=p>))</span>
</code></pre></div></div></div></div><p>This example reads page-click data from a "WebData" table in a "mycontainer" data container.
The <opt>inferSchema</opt> option is used to infer the schema of the table (in case the table doesn't have a schema file).</p><div class="admonition note"><div class=admonition-title>Note</div><div class=admonition-content>By using Spark's predicate pushdown, the <func>select</func> and <func>where</func> operations are handed over to the platform's NoSQL store, and pruned/filtered data is returned to Spark.</div></div><h3 id=write-examples>Write Examples</h3><h4 id=write-example-simple-append>Example 1  Simple Append-Mode Write</h4><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>val</span> <span class=n>df</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>((</span><span class=s>&#34;ians&#34;</span><span class=o>,</span> <span class=s>&#34;Ian Smith&#34;</span><span class=o>,</span> <span class=mi>25</span><span class=o>),</span> <span class=o>(</span><span class=s>&#34;dorisb&#34;</span><span class=o>,</span> <span class=s>&#34;Doris Brown&#34;</span><span class=o>,</span> <span class=mi>31</span><span class=o>))</span>
    <span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;username&#34;</span><span class=o>,</span> <span class=s>&#34;name&#34;</span><span class=o>,</span> <span class=s>&#34;age&#34;</span><span class=o>)</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;append&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;username&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/IT/Users/&#34;</span><span class=o>)</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=s2>&#34;ians&#34;</span><span class=p>,</span> <span class=s2>&#34;Ian Smith&#34;</span><span class=p>,</span> <span class=mi>25</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&#34;dorisb&#34;</span><span class=p>,</span> <span class=s2>&#34;Doris Brown&#34;</span><span class=p>,</span> <span class=mi>31</span><span class=p>)</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;username&#34;</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=p>])</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;append&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;username&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/IT/Users/&#34;</span><span class=p>)</span>
</code></pre></div></div></div></div><p>This example writes two items (rows) to an "IT/Users" table in a "mycontainer" data container whose primary-key attribute is <attr>username</attr>.
The save mode is set to <opt>append</opt>.
Therefore, DataFrame items that don't already exist in the table will be added in full, and existing items (based on the specified primary-key attribute values) will be updated only to add missing attributes, but values of existing item attributes won't be modified.</p><h4 id=write-example-replace-mode>Example 2  Replace-Mode Write</h4><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>val</span> <span class=n>df</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>((</span><span class=s>&#34;ians&#34;</span><span class=o>,</span> <span class=s>&#34;Ian Smith&#34;</span><span class=o>,</span> <span class=mi>26</span><span class=o>),</span> <span class=o>(</span><span class=s>&#34;janed&#34;</span><span class=o>,</span> <span class=s>&#34;Jane Doe&#34;</span><span class=o>,</span> <span class=mi>42</span><span class=o>))</span>
    <span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;username&#34;</span><span class=o>,</span> <span class=s>&#34;name&#34;</span><span class=o>,</span> <span class=s>&#34;age&#34;</span><span class=o>)</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;append&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;columnUpdate&#34;</span><span class=o>,</span> <span class=s>&#34;true&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;username&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/IT/Users/&#34;</span><span class=o>)</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=s2>&#34;ians&#34;</span><span class=p>,</span> <span class=s2>&#34;Ian Smith&#34;</span><span class=p>,</span> <span class=mi>26</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&#34;janed&#34;</span><span class=p>,</span> <span class=s2>&#34;Jane Doe&#34;</span><span class=p>,</span> <span class=mi>42</span><span class=p>)</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;username&#34;</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=p>])</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;append&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;columnUpdate&#34;</span><span class=p>,</span> <span class=s2>&#34;true&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;username&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/IT/Users/&#34;</span><span class=p>)</span>
</code></pre></div></div></div></div><p>This example writes two items (rows) to the same table as in the previous <a href=#write-example-simple-append>simple append-mode write example</a>  "IT/Users" table in a "mycontainer" data container whose primary-key attribute is <attr>username</attr>.
The save mode is set to <opt>append</opt> and the <a href=#option-columnUpdate><opt>columnUpdate</opt></a> option is set to <code>"true"</code>.
Therefore, assuming the code is run after the simple append-mode write example, the new "janed" item (which doesn't exist in the table) will be appended to the table; the existing "ians" item, which was included in the previous write example, will be overwritten with the item from the new write DataFrame (and the value of the <attr>age</attr> attribute will change from 25 to 26); and the existing "dorisb" item, which was written only in the previous example, will remain unchanged.</p><h4 id=write-example-counters>Example 3  Counter Attributes</h4><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>val</span> <span class=n>df</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>((</span><span class=mi>532</span><span class=o>,</span> <span class=mi>5</span><span class=o>,</span> <span class=s>&#34;IP-953481-35&#34;</span><span class=o>,</span> <span class=s>&#34;Jenny Penny&#34;</span><span class=o>,</span> <span class=mi>7866689</span><span class=o>))</span>
    <span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;kms&#34;</span><span class=o>,</span> <span class=s>&#34;num_drives&#34;</span><span class=o>,</span> <span class=s>&#34;policy&#34;</span><span class=o>,</span> <span class=s>&#34;primary_driver&#34;</span><span class=o>,</span> <span class=s>&#34;reg_num&#34;</span><span class=o>)</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;append&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;reg_num&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;counter&#34;</span><span class=o>,</span> <span class=s>&#34;kms, num_drives&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/Cars/&#34;</span><span class=o>)</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([</span>
    <span class=p>(</span><span class=mi>532</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=s2>&#34;IP-953481-35&#34;</span><span class=p>,</span> <span class=s2>&#34;Jenny Penny&#34;</span><span class=p>,</span> <span class=mi>7866689</span><span class=p>)</span>
<span class=p>],</span> <span class=p>[</span><span class=s2>&#34;kms&#34;</span><span class=p>,</span> <span class=s2>&#34;num_drives&#34;</span><span class=p>,</span> <span class=s2>&#34;policy&#34;</span><span class=p>,</span> <span class=s2>&#34;primary_driver&#34;</span><span class=p>,</span> <span class=s2>&#34;reg_num&#34;</span><span class=p>])</span>
<span class=n>df</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;append&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;reg_num&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;counter&#34;</span><span class=p>,</span> <span class=s2>&#34;kms, num_drives&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/Cars/&#34;</span><span class=p>)</span>
</code></pre></div></div></div></div><p>This example writes an item (row) to a "Cars" table in a "mycontainer" data container whose primary-key attribute is <attr>reg_num</attr>.
The save mode is set to <opt>append</opt>, which is the required mode when defining <a href=#counter-attributes>Counter Attributes</a>.
The example demonstrates the special significance of this mode when used together with the <a href=#option-counter><opt>counter</opt> option</a>.</p><p>The DataFrame contains a primary-key <attr>reg_num</attr> attribute (7866689); <attr>num_drives</attr> (5) and <attr>kms</attr> (532) attributes, which are defined as counter attributes using the <opt>counter</opt> option; and regular (non-counter) <attr>policy</attr> ("IP-953481") and <attr>primary_driver</attr> ("Jenny Penny") attributes.<br>Assume a matching item (<code>reg_num=7866689</code>) already exists in the table and that its has a <attr>num_drives</attr> attribute with the value 95 and a <attr>primary_driver</attr> attribute with the value "Harry Carey", but no <attr>kms</attr> or <attr>policy</attr> attributes.</p><p>Because the table item already has the <attr>num_drives</attr> counter attribute, its current value (95) will be incremented by the specified attribute value (5), updating the attribute's value to 100.
Because the <attr>kms</attr> counter attribute is new, it will be added to the item and initialized to its DataFrame value  532.<br>Both non-counter attributes in the DataFrame will be added to the table item with the respective DataFrame values, overwriting any existing values: the value of the <attr>primary_driver</attr> attribute will change from "Harry Carey" to "Jenny Penny", and a <attr>policy</attr> attribute with the value "IP-953481" will be added to the item.
(This behavior is different when using the append or overwrite save modes without the <opt>counter</opt> option for the same non-counter attributes.)</p><h4 id=write-example-condition>Example 4  Conditional Update</h4><div class=code-tabs><ul class=code-nav></ul><div class=tab-content><div class=tab-pane title=Scala><div class=highlight><pre class=chroma><code class=language-scala data-lang=scala><span class=k>import</span> <span class=nn>org.apache.spark.sql.SparkSession</span>

<span class=k>val</span> <span class=n>spark</span> <span class=k>=</span> <span class=nc>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>appName</span><span class=o>(</span><span class=s>&#34;My Spark Application&#34;</span><span class=o>).</span><span class=n>getOrCreate</span><span class=o>()</span>

<span class=k>var</span> <span class=n>writeDF</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>((</span><span class=s>&#34;7843321&#34;</span><span class=o>,</span> <span class=s>&#34;Honda&#34;</span><span class=o>,</span> <span class=mi>29321</span><span class=o>))</span>
    <span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;reg_license&#34;</span><span class=o>,</span> <span class=s>&#34;model&#34;</span><span class=o>,</span> <span class=s>&#34;odometer&#34;</span><span class=o>)</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;reg_license&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;overwrite&#34;</span><span class=o>).</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/cars/&#34;</span><span class=o>)</span>
<span class=k>var</span> <span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>load</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/cars/&#34;</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>writeDF</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>((</span><span class=s>&#34;7843321&#34;</span><span class=o>,</span> <span class=s>&#34;Honda&#34;</span><span class=o>,</span> <span class=mi>31718</span><span class=o>))</span>
    <span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;reg_license&#34;</span><span class=o>,</span> <span class=s>&#34;model&#34;</span><span class=o>,</span> <span class=s>&#34;odometer&#34;</span><span class=o>)</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;reg_license&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;condition&#34;</span><span class=o>,</span> <span class=s>&#34;${odometer} &gt; odometer&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;append&#34;</span><span class=o>).</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/cars/&#34;</span><span class=o>)</span>
<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>load</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/cars/&#34;</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>

<span class=n>writeDF</span> <span class=k>=</span> <span class=nc>Seq</span><span class=o>((</span><span class=s>&#34;7843321&#34;</span><span class=o>,</span> <span class=s>&#34;Ford&#34;</span><span class=o>,</span> <span class=mi>40001</span><span class=o>))</span>
    <span class=o>.</span><span class=n>toDF</span><span class=o>(</span><span class=s>&#34;reg_license&#34;</span><span class=o>,</span> <span class=s>&#34;model&#34;</span><span class=o>,</span> <span class=s>&#34;odometer&#34;</span><span class=o>)</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;key&#34;</span><span class=o>,</span> <span class=s>&#34;reg_license&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>option</span><span class=o>(</span><span class=s>&#34;condition&#34;</span><span class=o>,</span> <span class=s>&#34;${model} == model&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>mode</span><span class=o>(</span><span class=s>&#34;append&#34;</span><span class=o>).</span><span class=n>save</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/cars/&#34;</span><span class=o>)</span>
<span class=n>readDF</span> <span class=k>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=o>(</span><span class=s>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=o>)</span>
    <span class=o>.</span><span class=n>load</span><span class=o>(</span><span class=s>&#34;v3io://mycontainer/cars/&#34;</span><span class=o>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=o>()</span>
</code></pre></div></div><div class=tab-pane title=Python><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pyspark.sql</span> <span class=kn>import</span> <span class=n>SparkSession</span>

<span class=n>spark</span> <span class=o>=</span> <span class=n>SparkSession</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>getOrCreate</span><span class=p>()</span>

<span class=n>writeDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([(</span><span class=s2>&#34;7843321&#34;</span><span class=p>,</span> <span class=s2>&#34;Honda&#34;</span><span class=p>,</span> <span class=mi>29321</span><span class=p>)],</span>
                                <span class=p>[</span><span class=s2>&#34;reg_license&#34;</span><span class=p>,</span> <span class=s2>&#34;model&#34;</span><span class=p>,</span> <span class=s2>&#34;odometer&#34;</span><span class=p>])</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;reg_license&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;overwrite&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/cars/&#34;</span><span class=p>)</span>
<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/cars/&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>writeDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([(</span><span class=s2>&#34;7843321&#34;</span><span class=p>,</span> <span class=s2>&#34;Honda&#34;</span><span class=p>,</span> <span class=mi>31718</span><span class=p>)],</span>
                                <span class=p>[</span><span class=s2>&#34;reg_license&#34;</span><span class=p>,</span> <span class=s2>&#34;model&#34;</span><span class=p>,</span> <span class=s2>&#34;odometer&#34;</span><span class=p>])</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;reg_license&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;condition&#34;</span><span class=p>,</span> <span class=s2>&#34;${odometer} &gt; odometer&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;append&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/cars/&#34;</span><span class=p>)</span>
<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/cars/&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

<span class=n>writeDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>createDataFrame</span><span class=p>([(</span><span class=s2>&#34;7843321&#34;</span><span class=p>,</span> <span class=s2>&#34;Ford&#34;</span><span class=p>,</span> <span class=mi>40001</span><span class=p>)],</span>
                                <span class=p>[</span><span class=s2>&#34;reg_license&#34;</span><span class=p>,</span> <span class=s2>&#34;model&#34;</span><span class=p>,</span> <span class=s2>&#34;odometer&#34;</span><span class=p>])</span>
<span class=n>writeDF</span><span class=o>.</span><span class=n>write</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;key&#34;</span><span class=p>,</span> <span class=s2>&#34;reg_license&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>option</span><span class=p>(</span><span class=s2>&#34;condition&#34;</span><span class=p>,</span> <span class=s2>&#34;${model} == model&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>mode</span><span class=p>(</span><span class=s2>&#34;append&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/cars/&#34;</span><span class=p>)</span>
<span class=n>readDF</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>read</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;io.iguaz.v3io.spark.sql.kv&#34;</span><span class=p>)</span> \
    <span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=s2>&#34;v3io://mycontainer/cars/&#34;</span><span class=p>)</span>
<span class=n>readDF</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div></div></div></div><p>This example demonstrates how to <a href=#conditional-updates>conditionally update</a> NoSQL table items by using the <a href=#option-condition><opt>condition</opt></a> write option.
Each <func>write</func> call in the example is followed by matching <func>read</func> and <func>show</func> calls to read and display the value of the updated item in the target table after the write operation.</p><p>The first write command writes an item (row) to a "cars" table in a "mycontainer" data container.
The item's <attr>reg_license</attr> primary-key attribute is set to 7843321, the <attr>mode</attr> attribute is set to "Honda", and the <attr>odometer</attr> attribute is set to 29321.
The <opt>overwrite</opt> save mode is used to overwrite the table if it already exists and create it otherwise.
Reading the item from the table produces this output:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>+-----------+-----+--------+
<span class=p>|</span>reg_license<span class=p>|</span>model<span class=p>|</span>odometer<span class=p>|</span>
+-----------+-----+--------+
<span class=p>|</span>    7843321<span class=p>|</span>Honda<span class=p>|</span>   29321<span class=p>|</span>
+-----------+-----+--------+
</code></pre></div><p>The second write command uses the <opt>condition</opt> option to update the value of the item's <attr>odometer</attr> attribute only if this value is higher than the current value of this attribute in the table  <code>option("condition", "${odometer} > odometer")</code>.
The <opt>append</opt> save mode is used to update the specified item rather than overwriting the table.
Because the value of <attr>odometer</attr> in the write DataFrame (31718) is higher than the current value of this attribute in the table (29321), the condition evaluates to <code>true</code> and the write is executed, updating the value of the item's <attr>odometer</attr> attribute in the table, as shown when reading the item from the table:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>-----------+-----+--------+
<span class=p>|</span>reg_license<span class=p>|</span>model<span class=p>|</span>odometer<span class=p>|</span>
+-----------+-----+--------+
<span class=p>|</span>    7843321<span class=p>|</span>Honda<span class=p>|</span>   31718<span class=p>|</span>
+-----------+-----+--------+
</code></pre></div><p>The third write command uses the <opt>condition</opt> option (again with the <opt>append</opt> save mode) to update the value of the item's <attr>odometer</attr> attribute to 40001 only if it the value of the <attr>model</attr> attribute remains the same  <code>option("condition", "${model} == model")</code>.
Because the value of <attr>model</attr> in the write DataFrame ("Ford") is different than the current value of this attribute in the table ("Honda"), the condition evaluates to <code>false</code> and the write isn't executed (i.e., the table item isn't updated), as shown when reading the item from the table:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>-----------+-----+--------+
<span class=p>|</span>reg_license<span class=p>|</span>model<span class=p>|</span>odometer<span class=p>|</span>
+-----------+-----+--------+
<span class=p>|</span>    7843321<span class=p>|</span>Honda<span class=p>|</span>   31718<span class=p>|</span>
+-----------+-----+--------+
</code></pre></div><h2 id=see-also>See Also</h2><ul><li><a href=../../../../../data-layer/nosql/>Working with NoSQL Data</a></li><li><a href=../../../../../data-layer/data-ingestion-and-preparation/#spark-sql-n-dfs>Ingesting and preparing data using Spark</a></li><li><a href=../../../../../data-layer/spark-data-ingestion-qs/>Getting Started with Data Ingestion Using Spark</a></li><li><a href=../../../../../data-layer/reference/nosql-table-schema/>NoSQL Table Schema Reference</a></li><li><a href=../../../../../data-layer/reference/spark-apis/spark-datasets/spark-df-data-types/>Spark DataFrame Data Types</a></li><li><a href=../../../../../data-layer/reference/expressions/condition-expression/>Condition Expression</a></li></ul></div></div></div><a id=scroll-top></a><div class=footer><h2 class=footer-header>Bring Your Data Science <strong>to Life</strong></h2><div class=footer__cta-btn><a class="btn btn btn-animated text-white btn-animated" data-toggle=modal data-target=#modal_2201>Try Iguazio For Free</a></div><div class=footer-menu-wrapper><ul class=footer-menu><li class=section-item><h2 class=section-title><a href=https://www.iguazio.com/platform/>Platform</a></h2><ul class=sub-menu><li class=menu-item><a href=https://www.iguazio.com/platform/>MLOps Platform</a></li><li class=menu-item><a href=https://www.iguazio.com/feature-store/>Integrated Feature Store</a></li><li class=menu-item><a href=https://www.iguazio.com/technology/>Technology</a></li><li class=menu-item><a href=https://www.iguazio.com/latest-release/>Documentation</a></li></ul></li><li class=section-item><h2 class=section-title><a href=https://www.iguazio.com/solutions/>Solutions</a></h2><h2 class=section-sub-title>By Industry</h2><ul class=sub-menu><li class=menu-item><a href=https://www.iguazio.com/solutions/financial-services/>Financial Services</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/telecommunications/>Telecommunications</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/retail/>Retail</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/manufacturing/>Manufacturing</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/ad-tech-gaming/>Ad-Tech and Gaming</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/smart-mobility/>Smart Mobility</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/healthcare/>Healthcare</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/energy-and-utilities/>Energy and Utilities</a></li></ul></li><li class=section-item><h2 class=section-title></h2><h2 class=section-sub-title>By Use Case</h2><ul class=sub-menu><li class=menu-item><a href=https://www.iguazio.com/solutions/pipeline-orchestration/>ML Pipeline Orchestration</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/model-monitoring/>Model Monitoring</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/real-time-feature-engineering/>Real Time Feature Engineering</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/gpu-as-a-service/>GPU as a Service</a></li><li class=menu-item><a href=https://www.iguazio.com/solutions/serverless-automation/>Serverless Automation</a></li></ul></li><li class=section-item><h2 class=section-title><a href=https://www.iguazio.com/mlops/>MLOps</a></h2><ul class=sub-menu><li class=menu-item><a href=https://www.iguazio.com/mlops/>MLOps Resaources</a></li><li class=menu-item><a href=https://www.iguazio.com/mlops-live-webinar-series/>MLOps Live Webinar Series</a></li><li class=menu-item><a href=https://www.iguazio.com/glossary/>MLOps Glossary</a></li><li class=menu-item><a href=https://www.iguazio.com/questions/>MLOps Q&A</a></li></ul></li><li class=section-item><h2 class=section-title><a href=https://www.iguazio.com/open-source/>Open source</a></h2><ul class=sub-menu><li class=menu-item><a href=https://www.iguazio.com/open-source/nuclio/>Nuclio</a></li><li class=menu-item><a href=https://www.iguazio.com/open-source/mlrun/>MLRun</a></li></ul></li></li><li class=section-item><h2 class=section-title><a href=https://www.iguazio.com/customers/>Customers</a></h2><ul class=sub-menu><li class=menu-item><a href=https://www.iguazio.com/customers/>Customer Stories</a></li><li class=menu-item><a href=https://www.iguazio.com/support/>Support</a></li></ul></li><li class=section-item><h2 class=section-title><a href=https://www.iguazio.com/company/>Company</a></h2><ul class=sub-menu><li class=menu-item><a href=https://www.iguazio.com/company/>About</a></li><li class=menu-item><a href=https://www.iguazio.com/blog/>Blog</a></li><li class=menu-item><a href=https://www.iguazio.com/news-events/>News & Events</a></li><li class=menu-item><a href=https://www.iguazio.com/careers/>Careers</a></li><li class=menu-item><a href=https://www.iguazio.com/partners/>Partners</a></li><li class=menu-item><a href=https://www.iguazio.com/contact/>Contact</a></li></ul></li><li class=section-item><h2 class=section-title><a href=https://www.iguazio.com/blog>Blog</a></h2><ul class=sub-menu><li class=menu-item><a href=https://www.iguazio.com/introduction-to-tf-serving/>Introduction to TF Serving</a></li><li class=menu-item><a href=https://www.iguazio.com/odscwest2021/>ODSC West Conference- Top 6 Sessions You Must Attend</a></li><li class=menu-item><a href=https://www.iguazio.com/it-worked-fine-in-jupyter-now-what/>It Worked Fine in Jupyter. Now What?</a></li></ul></li><li class="section-item social-media"><ul class=social-media-icons><li class=media-item><a href=https://www.facebook.com/iguazio/ target=_blank><i class="fab fa-facebook-f"></i></a></li><li class=media-item><a href=https://twitter.com/iguazio target=_blank><i class="fab fa-twitter"></i></a></li><li class=media-item><a href=https://www.linkedin.com/company/iguazio/ target=_blank><i class="fab fa-linkedin"></i></a></li><li class=media-item><a href=https://www.youtube.com/channel/UChmi6ZzsZd9doYYVut1ppUg target=_blank><i class="fab fa-youtube"></i></a></li><li class=media-item><a href=https://github.com/nuclio/nuclio target=_blank><i class="fab fa-github"></i></a></li></ul></li></ul></div><p class=igz-ltd>&#169; Iguazio Ltd. - All Rights Reserved</p></div><div class=footer-bottom><div class=footer-bottom-wrapper><div class=container-fluid><div class=row><div class="col col-sm-12 col-md-7"><div class=part-left><p class=text>&#169; Iguazio Ltd. - All Rights Reserved</p></div></div><div class="col col-sm-12 col-md-5"><div class=part-right><p class=text><a href=https://www.iguazio.com/privacy-policy/>Privacy policy</a> |
<a href=https://www.iguazio.com/terms-of-use/>Terms of use</a></p></div></div></div></div></div></div><script>window.location.protocol!=='file:'&&(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-101852366-3','auto'),ga('send','pageview'))</script></body>