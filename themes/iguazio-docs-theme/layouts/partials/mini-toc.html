{{ $headers := findRE "<h[2].*?>(.|\n])+?</h[2]>" .Content }}

{{ if and (ge (len $headers) 1) (ne $.Params.toc "none") }}
  <div class="toc">
    <div class="mini-toc">
      <div class="mini-toc-header">
        <i class="fas fa-caret-right laptop" aria-hidden="true"></i>
        <span>On This Page</span>
        <i class="fas fa-caret-right desktop" aria-hidden="true"></i>
      </div>
    {{ if eq $.Params.toc "hugo" }}
    <!-- Use the Hugo TableOfContents template to create the mini TOC.
      Headings created with shortcodes will not be included in the mini TOC.
    -->
      {{ .TableOfContents }}
    {{ else }}
    <!-- Use the Hugo TableOfContents template to create the mini TOC.
       Headings created with shortcodes will not be included in the mini TOC. -->
      <nav role="navigation" id="TableOfContents">
        <ul class="toc-js"></ul>
      </nav>
  {{ end }}
    </div>
  </div>
{{ end }}

